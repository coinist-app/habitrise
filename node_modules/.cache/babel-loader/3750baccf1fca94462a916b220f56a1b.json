{"ast":null,"code":"import _defineProperty from \"/Users/sampath/Documents/code/me/stint-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/Users/sampath/Documents/code/me/stint-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/sampath/Documents/code/me/stint-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/sampath/Documents/code/me/stint-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectDestructuringEmpty from \"/Users/sampath/Documents/code/me/stint-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty\";\nvar _jsxFileName = \"/Users/sampath/Documents/code/me/stint-web/src/components/assessment/engine/index.jsx\";\nimport React from \"react\";\nimport { useState, useEffect, useRef } from \"react\";\nimport Editor, { useMonaco } from \"@monaco-editor/react\";\nimport { useSpeechSynthesis } from 'react-speech-kit';\nimport CONSTANTS from \"../../../constants\";\nimport \"./engine.module.css\";\nimport Timer from '../../core/timer';\n\nvar AssessmentEngine = function AssessmentEngine(_ref) {\n  var _React$createElement;\n\n  _objectDestructuringEmpty(_ref);\n\n  var LANG_ID_JAVA = sessionStorage.getItem('editorLangId');\n  var speechQuestionTitle = useRef(null);\n  var monaco = useMonaco();\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      input = _useState2[0],\n      setInput = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      lang = _useState4[0],\n      setLang = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      questionTitle = _useState6[0],\n      setQuestionTitle = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      questionDescription = _useState8[0],\n      setQuestionDescription = _useState8[1];\n\n  var _useState9 = useState(0),\n      _useState10 = _slicedToArray(_useState9, 2),\n      langId = _useState10[0],\n      setLangId = _useState10[1];\n\n  var _useState11 = useState(0),\n      _useState12 = _slicedToArray(_useState11, 2),\n      questionId = _useState12[0],\n      setQuestionId = _useState12[1];\n\n  var _useState13 = useState({}),\n      _useState14 = _slicedToArray(_useState13, 2),\n      userInput = _useState14[0],\n      setUserInput = _useState14[1];\n\n  var _useState15 = useState(\"Running...\"),\n      _useState16 = _slicedToArray(_useState15, 2),\n      output = _useState16[0],\n      setOutput = _useState16[1];\n\n  var _useState17 = useState(sessionStorage.getItem('defaultCode')),\n      _useState18 = _slicedToArray(_useState17, 2),\n      defaultCode = _useState18[0],\n      setDefaultCode = _useState18[1];\n\n  var _useState19 = useState(false),\n      _useState20 = _slicedToArray(_useState19, 2),\n      showOutput = _useState20[0],\n      setShowOutput = _useState20[1];\n\n  var _useState21 = useState(0),\n      _useState22 = _slicedToArray(_useState21, 2),\n      timeRemaining = _useState22[0],\n      setTimeRemaining = _useState22[1];\n\n  var _useState23 = useState(\"\"),\n      _useState24 = _slicedToArray(_useState23, 2),\n      lastOutput = _useState24[0],\n      setLastOutput = _useState24[1];\n\n  var _useState25 = useState(\"\"),\n      _useState26 = _slicedToArray(_useState25, 2),\n      resultCriteria = _useState26[0],\n      setResultCriteria = _useState26[1];\n\n  var _useState27 = useState(0),\n      _useState28 = _slicedToArray(_useState27, 2),\n      syntacticalErrors = _useState28[0],\n      setSyntacticalErrors = _useState28[1];\n\n  var _useState29 = useState(0),\n      _useState30 = _slicedToArray(_useState29, 2),\n      attemptedQuestionId = _useState30[0],\n      setAttemptedQuestionId = _useState30[1];\n\n  var _useState31 = useState(false),\n      _useState32 = _slicedToArray(_useState31, 2),\n      isLastQuestion = _useState32[0],\n      setIsLastQuestion = _useState32[1];\n\n  var _useState33 = useState(false),\n      _useState34 = _slicedToArray(_useState33, 2),\n      isLoading = _useState34[0],\n      setIsLoading = _useState34[1];\n\n  var _useState35 = useState(false),\n      _useState36 = _slicedToArray(_useState35, 2),\n      isVoiceActive = _useState36[0],\n      setIsVoiceActive = _useState36[1];\n\n  var prompt_errors = '0d79dc22-de64-4f90-86da-3cd5a297fe5c';\n  var prompt_explain = '0d79dc22-de64-4f90-86da-3cd5a297fe5c';\n\n  var onSpeechEnd = function onSpeechEnd() {\n    console.log('on end');\n    setIsVoiceActive(false);\n  };\n\n  var _useSpeechSynthesis = useSpeechSynthesis({\n    onEnd: onSpeechEnd\n  }),\n      speak = _useSpeechSynthesis.speak,\n      voices = _useSpeechSynthesis.voices;\n\n  var handleEditorChange = function handleEditorChange(value, event) {\n    setInput(value);\n    localStorage.setItem('input', value);\n    setShowOutput(false);\n  };\n\n  var invokeAPI =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var response, jsonResponse, message, jsonGetSolution, url, getSolution, _output, error, compilation_error, errCount;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setOutput('Creating Submission ...');\n              _context.next = 3;\n              return fetch(\"https://judge0-ce.p.rapidapi.com/submissions\", {\n                method: \"POST\",\n                headers: {\n                  \"x-rapidapi-host\": \"judge0-ce.p.rapidapi.com\",\n                  \"x-rapidapi-key\": \"a1504d0aebmsha2c15d90ecffa8dp117081jsn36e10aaf0ea7\",\n                  // Get yours for free at https://rapidapi.com/judge0-official/api/judge0-ce/\n                  \"content-type\": \"application/json\",\n                  accept: \"application/json\"\n                },\n                body: JSON.stringify({\n                  source_code: input,\n                  stdin: null,\n                  language_id: langId\n                })\n              });\n\n            case 3:\n              response = _context.sent;\n              setOutput(\"Submission Created ...\\n\");\n              _context.next = 7;\n              return response.json();\n\n            case 7:\n              jsonResponse = _context.sent;\n\n              if (response.ok) {\n                _context.next = 11;\n                break;\n              }\n\n              message = \"An error has occured: \".concat(response.status);\n              throw new Error(message);\n\n            case 11:\n              jsonGetSolution = {\n                status: {\n                  description: \"Queue\"\n                },\n                stderr: null,\n                compile_output: null\n              };\n\n            case 12:\n              if (!(jsonGetSolution.status.description !== \"Accepted\" && jsonGetSolution.stderr == null && jsonGetSolution.compile_output == null)) {\n                _context.next = 24;\n                break;\n              }\n\n              setOutput(\"Creating Submission ... \\nSubmission Created ...\\nChecking Submission Status\\nstatus : \".concat(jsonGetSolution.status.description));\n\n              if (!jsonResponse.token) {\n                _context.next = 22;\n                break;\n              }\n\n              url = \"https://judge0-ce.p.rapidapi.com/submissions/\".concat(jsonResponse.token, \"?base64_encoded=true\");\n              _context.next = 18;\n              return fetch(url, {\n                method: \"GET\",\n                headers: {\n                  \"x-rapidapi-host\": \"judge0-ce.p.rapidapi.com\",\n                  \"x-rapidapi-key\": \"a1504d0aebmsha2c15d90ecffa8dp117081jsn36e10aaf0ea7\",\n                  // Get yours for free at https://rapidapi.com/judge0-official/api/judge0-ce/\n                  \"content-type\": \"application/json\"\n                }\n              });\n\n            case 18:\n              getSolution = _context.sent;\n              _context.next = 21;\n              return getSolution.json();\n\n            case 21:\n              jsonGetSolution = _context.sent;\n\n            case 22:\n              _context.next = 12;\n              break;\n\n            case 24:\n              if (jsonGetSolution.stdout) {\n                _output = atob(jsonGetSolution.stdout);\n                console.log('--output--', _output);\n                setLastOutput(_output);\n                setOutput(\"Results :\\n\".concat(_output, \"\\nExecution Time : \").concat(jsonGetSolution.time, \" Secs\\nMemory used : \").concat(jsonGetSolution.memory, \" bytes\"));\n                sayExecutionSuccess();\n              } else if (jsonGetSolution.stderr) {\n                error = atob(jsonGetSolution.stderr);\n                setOutput(\"\\n Error :\".concat(error));\n              } else {\n                compilation_error = atob(jsonGetSolution.compile_output);\n                errCount = syntacticalErrors + 1;\n                setSyntacticalErrors(errCount);\n                console.log('syntacticalError', syntacticalErrors);\n                setOutput(\"\\n Error :\".concat(compilation_error));\n                sayCompilationFailure();\n              }\n\n            case 25:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function invokeAPI() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var run = function run(e) {\n    setShowOutput(true);\n    /* window.addEventListener('unhandledrejection', event => { console.log('E: ',event); });\r\n    onunhandledrejection = event => {\r\n      alert('There was an error submitting your code. Pls check your syntax & try again.')\r\n      console.log('invoke API '); //window.location.reload();\r\n    }; */\n\n    invokeAPI();\n  };\n\n  var submit = function submit(e) {\n    setIsLoading(true);\n    var rawResponse = fetch(CONSTANTS.ENDPOINT.DIRECTUSAUTH, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        \"email\": \"stint.assess@gmail.com\",\n        \"password\": \"dstintapp1\"\n      })\n    }).then(function (res) {\n      var res = res.json();\n      res.then(function (r) {\n        console.log('Data: ', r.data);\n        console.log('AccessToken: ', r.data.access_token);\n        var accessToken = r.data.access_token;\n        createSessionRecording(accessToken);\n      });\n    });\n  };\n\n  var createSessionRecording = function createSessionRecording(accessToken) {\n    var recording = JSON.stringify(JSON.parse(localStorage.getItem('recording')).events);\n    recording = recording.replaceAll(\"'\", \"&quot\");\n    var rawResponse = fetch(CONSTANTS.ENDPOINT.POSTSESSIONRECORDING, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        \"questionId\": questionId,\n        \"sessionId\": parseInt(sessionStorage.getItem('assessment_session_id'), 10),\n        \"events\": recording\n      })\n    }).then(function (res) {\n      var res = res.json();\n      res.then(function (r) {\n        console.log('session recording submitted');\n        captureResults(accessToken);\n      });\n    });\n  };\n\n  var captureResults = function captureResults(accessToken) {\n    var solutionCorrectnessValue = 0;\n    var timeTakenMin = 0;\n    var numSyntacticalErrors = 0;\n    var minRem = document.getElementById('timeRem').innerHTML.replaceAll(' ', '').split(':')[1];\n    var secRem = document.getElementById('timeRem').innerHTML.replaceAll(' ', '').replaceAll('s', '').split(':')[2];\n    var questionTimeLimitSecs = timeRemaining;\n    var secondsRemaining = parseInt(minRem, 10) * 60 + parseInt(secRem, 10);\n    console.log('--timeLimit--', questionTimeLimitSecs);\n    console.log('--secondsElapsed--', secondsRemaining);\n    timeTakenMin = (questionTimeLimitSecs - secondsRemaining) / 60;\n    console.log('--timeTakenMin--', timeTakenMin);\n\n    if (lastOutput != \"\" && lastOutput.indexOf(resultCriteria) >= 0) {\n      solutionCorrectnessValue = 100;\n    }\n\n    createEvaluation(accessToken, \"solution_correctness\", solutionCorrectnessValue);\n    createEvaluation(accessToken, \"time_taken_mins\", timeTakenMin);\n    createEvaluation(accessToken, \"num_syntactical_errors\", syntacticalErrors);\n    sessionStorage.setItem(\"attemptedQuestionIds\", sessionStorage.getItem('attemptedQuestionIds') + attemptedQuestionId + ',');\n    loadNextQuestion(solutionCorrectnessValue, timeTakenMin, syntacticalErrors);\n  };\n\n  var loadNextQuestion = function loadNextQuestion(solutionCorrectnessValue, timeTakenMin, syntacticalErrors) {\n    var progressDifficultyLevel = false;\n    var currentDifficultyLevel = sessionStorage.getItem(\"difficultyLevel\");\n    var nextDifficultyLevel = currentDifficultyLevel; //completed in half the time\n\n    if (timeTakenMin * 60 < timeRemaining / 2 && syntacticalErrors < 30) {\n      progressDifficultyLevel = true;\n    }\n\n    if (progressDifficultyLevel) {\n      if (currentDifficultyLevel == 'Beginner') {\n        nextDifficultyLevel = \"Intermediate\";\n      } else if (currentDifficultyLevel == 'Intermediate') {\n        nextDifficultyLevel = \"Advanced\";\n      }\n\n      sessionStorage.setItem(\"difficultyLevel\", nextDifficultyLevel);\n      console.log('Difficulty level progressed!');\n    }\n\n    if (isLastQuestion) {\n      window.location.href = '/assessment/done';\n    } else {\n      window.location.reload();\n    }\n  };\n\n  var createEvaluation = function createEvaluation(accessToken, metric, value) {\n    var rawResponse = fetch(CONSTANTS.ENDPOINT.POSTEVALUATION + accessToken, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        \"question_id\": questionId,\n        \"assessment_session_id\": parseInt(sessionStorage.getItem('assessment_session_id'), 10),\n        \"metric\": metric,\n        \"value\": value\n      })\n    }).then(function (res) {\n      var res = res.json();\n      res.then(function (r) {\n        console.log('Data: ', r.data);\n      });\n    });\n  };\n\n  var getTimeLimitInMilliSecs = function getTimeLimitInMilliSecs(timeStr) {\n    timeStr = timeStr.replace(' min', '');\n    var timeInMins = parseInt(timeStr, 10);\n    var timeInMilliSecs = timeInMins * 60 * 1000;\n    return timeInMilliSecs;\n  };\n\n  var checkIsLastQuestion = function checkIsLastQuestion(timeLimit) {\n    var timeLimitInMilliSecs = getTimeLimitInMilliSecs(timeLimit);\n    var timeLimitInSecs = timeLimitInMilliSecs / 1000;\n    var timeLimitInMin = timeLimitInSecs / 60;\n    var activeQuestionDuration = timeLimitInMin;\n    var totalDuration = parseInt(sessionStorage.getItem('totalDuration'), 10);\n\n    if (sessionStorage.getItem('activeQuestionDuration') != null && sessionStorage.getItem('activeQuestionDuration') != \"\") {\n      activeQuestionDuration = activeQuestionDuration + parseInt(sessionStorage.getItem('activeQuestionDuration'), 10);\n    }\n\n    sessionStorage.setItem('activeQuestionDuration', activeQuestionDuration); // make current question as last question if time remaining < 10 min\n\n    if (totalDuration - activeQuestionDuration < 10) {\n      setIsLastQuestion(true);\n    }\n  };\n\n  var startQuestionTimer = function startQuestionTimer(timeLimit) {\n    var timeLimitInMilliSecs = getTimeLimitInMilliSecs(timeLimit);\n    var timeLimitInSecs = timeLimitInMilliSecs / 1000;\n    console.log('::timer::');\n    setTimeRemaining(timeLimitInSecs);\n    console.log('timeInMilliSecs: ', timeLimitInMilliSecs);\n    setTimeout(function () {\n      console.log('load next question');\n    }, timeLimitInMilliSecs);\n  };\n\n  var getQuestion = function getQuestion(accessToken, skillId, competencyId, difficultyLevel) {\n    console.log('calling getQuestion...');\n    var rawResponse = fetch(CONSTANTS.ENDPOINT.GETQUESTION + accessToken + '&filter={ \"difficulty_level\": { \"_eq\": \"' + difficultyLevel + '\" }, \"skill_id\": { \"_eq\": ' + skillId + ' }, \"competency\": { \"_eq\": ' + competencyId + ' }}').then(function (res) {\n      var res = res.json();\n      res.then(function (r) {\n        var questionIndex = 0;\n        var question = r.data;\n        console.log('--question[questionIndex].id--', questionIndex);\n        console.log('--question[]--', question.length);\n\n        while (sessionStorage.getItem(\"attemptedQuestionIds\") == null || sessionStorage.getItem(\"attemptedQuestionIds\") != \"\" && question.length > questionIndex && sessionStorage.getItem(\"attemptedQuestionIds\").indexOf(question[questionIndex].id + ',') == -1) {\n          console.log('--questionIndex', questionIndex);\n          var title = question[questionIndex].title;\n          var description = question[questionIndex].description;\n          var codeSnippet = question[questionIndex].code_snippet;\n          var timeLimit = question[questionIndex].time_limit;\n          setQuestionId(question[questionIndex].id);\n          console.log('codeSnippet: ', codeSnippet);\n          console.log('timeLimit', timeLimit);\n          startQuestionTimer(timeLimit);\n          checkIsLastQuestion(timeLimit);\n          setInput(codeSnippet);\n          setQuestionTitle(title);\n          setQuestionDescription(description);\n          setResultCriteria(question[questionIndex].result_criteria);\n          setAttemptedQuestionId(question[questionIndex].id);\n          questionIndex++;\n          break;\n        }\n      });\n    });\n  };\n\n  var getQuestionToken = function getQuestionToken() {\n    var rawResponse = fetch(CONSTANTS.ENDPOINT.DIRECTUSAUTH, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        \"email\": \"stint.assess@gmail.com\",\n        \"password\": \"dstintapp1\"\n      })\n    }).then(function (res) {\n      var res = res.json();\n      res.then(function (r) {\n        console.log('Data: ', r.data);\n        console.log('AccessToken1: ', r.data.access_token);\n        var accessToken = r.data.access_token;\n        var difficultyLevel = sessionStorage.getItem(\"difficultyLevel\"); //read from session storage\n\n        var skillId = sessionStorage.getItem(\"primarySkill\"); //read from session storage\n\n        var competencyId = sessionStorage.getItem(\"competencyId\"); //read from session storage\n\n        getQuestion(accessToken, skillId, competencyId, difficultyLevel);\n      });\n    });\n  };\n\n  var events = [];\n\n  var startSessionRecord = function startSessionRecord() {\n    if (typeof window.rrweb != \"undefined\") {\n      var save = function save() {\n        var body = JSON.stringify({\n          events: events\n        });\n        localStorage.setItem('recording', body);\n        console.log('--events--', body);\n        /* new window.rrwebPlayer({\r\n          target: document.getElementById('container'), // customizable root element\r\n          props: {\r\n            events\r\n          },\r\n        }); */\n      };\n\n      window.rrweb.record({\n        emit: function emit(event) {\n          // push event into the events array\n          events.push(event);\n        }\n      });\n      setInterval(save, 15 * 1000);\n    }\n  };\n\n  var sayExecutionSuccess = function sayExecutionSuccess() {\n    speak({\n      text: \"Great! Your code executed successfully.\",\n      voice: voices[0],\n      rate: 1,\n      pitch: 1.7\n    });\n    setIsVoiceActive(true);\n  };\n\n  var sayCompilationFailure = function sayCompilationFailure() {\n    speak({\n      text: \"There-are some errors. Please-check your code and try again.\",\n      voice: voices[0],\n      rate: 1.1,\n      pitch: 1.9\n    });\n    setIsVoiceActive(true);\n  };\n\n  var startSpeech = function startSpeech() {\n    speak({\n      text: questionTitle,\n      voice: voices[0],\n      rate: 1,\n      pitch: 1.7\n    });\n    setIsVoiceActive(true);\n    setTimeout(function () {\n      speak({\n        text: \"Use \" + lang + \" to write your code\",\n        voice: voices[0],\n        rate: 1,\n        pitch: 1.7\n      });\n      setIsVoiceActive(true);\n      /* setTimeout(function() {\r\n            speak({ text: \"You can think through an approach and once you're ready you can explain. This will be recorded and used during evaluation.\", voice: voices[0], rate: 1, pitch: 1.7 });\r\n            setIsVoiceActive(true);\r\n            setTimeout(function() {\r\n                        speak({ text: \"Please go ahead once you're-ready.\", voice: voices[0], rate: 1, pitch: 1.7 });\r\n                        setIsVoiceActive(true);\r\n                    }, 1500);\r\n        }, 1500); */\n    }, 1500);\n  };\n\n  var startVoiceBot = function startVoiceBot() {\n    var SW9 = new window.SiriWave({\n      style: \"ios9\",\n      container: document.getElementById(\"engine_container-9__1Cs0M\"),\n      autostart: true\n    });\n    setTimeout(\"document.getElementById('speechQuestionTitle').click()\", 2000); //https://freetts.com/Home/PlayAudio?Language=en-IN&Voice=en-IN-Standard-C&TextMessage=Find%20the%20frequency%20of%20each%20number%20in%20the%20given%20arraylist.%20%3Cbreak%20time%3D%221s%22%20%2F%3E%20Print%20output%20to%20console%20in%20the%20format%20given.%20%3Cbreak%20time%3D%221.5s%22%20%2F%3EUse%20Java%20to%20write%20your%20code.&type=0\n\n    /* const rawResponse = fetch('https://freetts.com/Home/PlayAudio?Language=en-IN&Voice=en-IN-Standard-C&TextMessage=Find%20the%20frequency%20of%20each%20number%20in%20the%20given%20arraylist.%20%3Cbreak%20time%3D%221s%22%20%2F%3E%20Print%20output%20to%20console%20in%20the%20format%20given.%20%3Cbreak%20time%3D%221.5s%22%20%2F%3EUse%20Java%20to%20write%20your%20code.&type=0',\r\n    headers: {\r\n        'mode':'cors'\r\n      }).then((res)=>{\r\n      var res = res.json();\r\n        res.then(function(r) {\r\n          var speechURL = r.id;\r\n          console.log('Speech Response: ', r);\r\n          console.log('Speech Data: ', r.data);\r\n          console.log('Speech URL: ', speechURL);\r\n          //setSpeechURL(speechURL);\r\n        });\r\n      }); */\n  };\n\n  useEffect(function () {\n    window.showVideo = true;\n    setLang(sessionStorage.getItem('editorLangName'));\n    setLangId(LANG_ID_JAVA);\n    localStorage.setItem('language_Id', LANG_ID_JAVA);\n\n    if (localStorage.getItem('input') != null) {\n      console.log('localStorage.getItem(input): ', localStorage.getItem('input'));\n      setDefaultCode(localStorage.getItem('input'));\n      setInput(localStorage.getItem('input'));\n    }\n\n    getQuestionToken();\n    startSessionRecord();\n    startVoiceBot(); //setOutput(\"Click the 'Save & Run' button to view your program's output.\");\n\n    if (monaco) {\n      console.log(\"here is the monaco instance:\", monaco);\n    }\n  }, []);\n  return React.createElement(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 455\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 457\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 458\n    },\n    __self: this\n  }, React.createElement(\"section\", {\n    class: \"section\",\n    style: {\n      paddingTop: '24px',\n      marginTop: '-6rem'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 459\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    class: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 461\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    id: \"speechQuestionTitle\",\n    style: {\n      display: 'none'\n    },\n    onClick: function onClick() {\n      return startSpeech();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 462\n    },\n    __self: this\n  }, \"Speak\"), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 463\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    id: \"engine_container-9__1Cs0M\",\n    style: {\n      display: isVoiceActive ? 'block' : 'none'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 464\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    style: {\n      float: 'right'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 466\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 467\n    },\n    __self: this\n  }, React.createElement(\"b\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 467\n    },\n    __self: this\n  }, \"Time left\"), \"\\xA0\\xA0\"), React.createElement(Timer, {\n    seconds: timeRemaining,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 467\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 469\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    style: {\n      lineHeight: '28px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 470\n    },\n    __self: this\n  }, React.createElement(\"b\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 470\n    },\n    __self: this\n  }, \"Live coding question:\"), \"\\xA0\\xA0\", questionTitle, \"\\xA0\\xA0\", questionDescription, React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 470\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 470\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 470\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    style: {\n      color: '#05976e'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 470\n    },\n    __self: this\n  }, \"*Use \", lang, \" to write your code.\"), React.createElement(\"span\", {\n    style: {\n      color: '#666',\n      fontSize: '0.8rem'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 471\n    },\n    __self: this\n  }, \"(Please allow \", React.createElement(\"b\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 471\n    },\n    __self: this\n  }, \"camera access\"), \". Your video is kept private.)\")), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 473\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    id: \"container\",\n    class: \"engine_editor-container__2uqGs\",\n    style: {\n      width: '100%',\n      height: '350px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 474\n    },\n    __self: this\n  }, React.createElement(Editor, {\n    defaultLanguage: lang,\n    defaultValue: defaultCode,\n    onChange: handleEditorChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 475\n    },\n    __self: this\n  })), showOutput && React.createElement(\"div\", {\n    id: \"outputContainer\",\n    class: \"engine_editor-container__2uqGs\",\n    style: {\n      width: '100%',\n      height: '129px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 481\n    },\n    __self: this\n  }, React.createElement(\"textarea\", (_React$createElement = {\n    disabled: true,\n    value: \"output\",\n    width: \"300px\",\n    height: \"400px\",\n    className: \"engine_engine_output__dBs6o__2T5H9\"\n  }, _defineProperty(_React$createElement, \"value\", output), _defineProperty(_React$createElement, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 482\n  }), _defineProperty(_React$createElement, \"__self\", this), _React$createElement))), React.createElement(\"div\", {\n    class: \"buttons mb-20\",\n    style: {\n      fontSize: '2rem',\n      display: 'block',\n      margin: '0 auto',\n      left: '0',\n      right: '0',\n      textAlign: 'center',\n      zIndex: '9'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 487\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"buttons mb-20\",\n    style: {\n      marginTop: '36px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 488\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    className: \"button is-primary mr-4\",\n    onClick: function onClick() {\n      run();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 489\n    },\n    __self: this\n  }, \"Save & Run\"), !isLastQuestion ? React.createElement(\"span\", {\n    className: \"button is-primary mr-4 engine_right-btn-span__3aObT\",\n    onClick: function onClick() {\n      submit();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 491\n    },\n    __self: this\n  }, \"Submit & Load Next >\") : React.createElement(React.Fragment, null, React.createElement(\"span\", {\n    className: \"button is-primary mr-4 engine_right-btn-span__3aObT\",\n    onClick: function onClick() {\n      submit();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 492\n    },\n    __self: this\n  }, \"Submit & Finish\"), React.createElement(\"div\", {\n    class: \"engine_bubble__3jzVX engine_bubble-left__2mlj5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 493\n    },\n    __self: this\n  }, \"This is the final question of your assessment.\")))))))), isLoading && React.createElement(\"div\", {\n    class: \"profile_spinner-container__3FkTD\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 505\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    class: \"profile_spinner__1u7yJ\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 505\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    class: \"navbar-side is-hidden is-fixed is-top-0 is-left-0 has-background-blur\",\n    style: {\n      zIndex: '50',\n      width: '100%',\n      height: '100%'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 506\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    class: \"is-absolute\",\n    style: {\n      zIndex: '-1;'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 507\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    class: \"container is-relative\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 508\n    },\n    __self: this\n  }, React.createElement(\"a\", {\n    class: \"navbar-close is-absolute is-right-0 mt-6 mr-6\",\n    href: \"#\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 509\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: \"acros-assets/icons/mobile-decline.svg\",\n    alt: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 510\n    },\n    __self: this\n  }))), React.createElement(\"aside\", {\n    class: \"py-6 px-6 pb-8 has-background-white is-flex is-flex-direction-column is-justify-content-space-between\",\n    style: {\n      height: '100%',\n      width: '288px',\n      overflowY: 'auto'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 513\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 514\n    },\n    __self: this\n  }, React.createElement(\"a\", {\n    class: \"navbar-item title is-size-4 has-text-dark pl-4 mb-5\",\n    href: \"#\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 515\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: \"acros-assets/logo/logo.png\",\n    width: \"auto\",\n    style: {\n      maxHeight: 'initial',\n      width: '70px'\n    },\n    alt: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 516\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 519\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    class: \"buttons mb-8\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 520\n    },\n    __self: this\n  }, React.createElement(\"a\", {\n    class: \"button is-dark is-outlined is-fullwidth mb-4\",\n    href: \"#\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 520\n    },\n    __self: this\n  }, \"Log In\"), React.createElement(\"a\", {\n    class: \"button is-primary is-fullwidth\",\n    href: \"#\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 520\n    },\n    __self: this\n  }, \"Sign up\")), React.createElement(\"small\", {\n    class: \"has-text-grey-darker ml-6\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 521\n    },\n    __self: this\n  }, \"2021 \\xA9 Shuffle\"))))), React.createElement(\"section\", {\n    class: \"section py-16\",\n    id: \"cvLive\",\n    style: {\n      paddingTop: '0px !important'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 527\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    class: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 528\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    class: \"columns is-align-items-center mb-0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 529\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    class: \"column mb-16 mb-0-tablet\",\n    style: {\n      marginTop: '76px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 530\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    class: \"title mb-6 has-mw-lg\",\n    style: {\n      fontSize: '2.2rem'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 531\n    },\n    __self: this\n  }), React.createElement(\"p\", {\n    class: \"subtitle has-mw-md mb-12\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 532\n    },\n    __self: this\n  }, React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 532\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 532\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 532\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 532\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 532\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    class: \"column\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 535\n    },\n    __self: this\n  })))));\n};\n\nexport default AssessmentEngine;","map":{"version":3,"sources":["/Users/sampath/Documents/code/me/stint-web/src/components/assessment/engine/index.jsx"],"names":["React","useState","useEffect","useRef","Editor","useMonaco","useSpeechSynthesis","CONSTANTS","Timer","AssessmentEngine","LANG_ID_JAVA","sessionStorage","getItem","speechQuestionTitle","monaco","input","setInput","lang","setLang","questionTitle","setQuestionTitle","questionDescription","setQuestionDescription","langId","setLangId","questionId","setQuestionId","userInput","setUserInput","output","setOutput","defaultCode","setDefaultCode","showOutput","setShowOutput","timeRemaining","setTimeRemaining","lastOutput","setLastOutput","resultCriteria","setResultCriteria","syntacticalErrors","setSyntacticalErrors","attemptedQuestionId","setAttemptedQuestionId","isLastQuestion","setIsLastQuestion","isLoading","setIsLoading","isVoiceActive","setIsVoiceActive","prompt_errors","prompt_explain","onSpeechEnd","console","log","onEnd","speak","voices","handleEditorChange","value","event","localStorage","setItem","invokeAPI","fetch","method","headers","accept","body","JSON","stringify","source_code","stdin","language_id","response","json","jsonResponse","ok","message","status","Error","jsonGetSolution","description","stderr","compile_output","token","url","getSolution","stdout","atob","time","memory","sayExecutionSuccess","error","compilation_error","errCount","sayCompilationFailure","run","e","submit","rawResponse","ENDPOINT","DIRECTUSAUTH","then","res","r","data","access_token","accessToken","createSessionRecording","recording","parse","events","replaceAll","POSTSESSIONRECORDING","parseInt","captureResults","solutionCorrectnessValue","timeTakenMin","numSyntacticalErrors","minRem","document","getElementById","innerHTML","split","secRem","questionTimeLimitSecs","secondsRemaining","indexOf","createEvaluation","loadNextQuestion","progressDifficultyLevel","currentDifficultyLevel","nextDifficultyLevel","window","location","href","reload","metric","POSTEVALUATION","getTimeLimitInMilliSecs","timeStr","replace","timeInMins","timeInMilliSecs","checkIsLastQuestion","timeLimit","timeLimitInMilliSecs","timeLimitInSecs","timeLimitInMin","activeQuestionDuration","totalDuration","startQuestionTimer","setTimeout","getQuestion","skillId","competencyId","difficultyLevel","GETQUESTION","questionIndex","question","length","id","title","codeSnippet","code_snippet","time_limit","result_criteria","getQuestionToken","startSessionRecord","rrweb","save","record","emit","push","setInterval","text","voice","rate","pitch","startSpeech","startVoiceBot","SW9","SiriWave","style","container","autostart","showVideo","paddingTop","marginTop","display","float","lineHeight","color","fontSize","width","height","margin","left","right","textAlign","zIndex","overflowY","maxHeight"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,QAAR,EAAkBC,SAAlB,EAA6BC,MAA7B,QAA0C,OAA1C;AACA,OAAOC,MAAP,IAAiBC,SAAjB,QAAkC,sBAAlC;AACA,SAASC,kBAAT,QAAmC,kBAAnC;AACA,OAAOC,SAAP,MAAsB,oBAAtB;AACA,OAAO,qBAAP;AACA,OAAOC,KAAP,MAAkB,kBAAlB;;AAEA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,OAAQ;AAAA;;AAAA;;AAEjC,MAAMC,YAAY,GAAGC,cAAc,CAACC,OAAf,CAAuB,cAAvB,CAArB;AACA,MAAMC,mBAAmB,GAAGV,MAAM,CAAC,IAAD,CAAlC;AAEA,MAAMW,MAAM,GAAGT,SAAS,EAAxB;;AALiC,kBAMPJ,QAAQ,CAAC,EAAD,CAND;AAAA;AAAA,MAM1Bc,KAN0B;AAAA,MAMnBC,QANmB;;AAAA,mBAOTf,QAAQ,CAAC,EAAD,CAPC;AAAA;AAAA,MAO1BgB,IAP0B;AAAA,MAOpBC,OAPoB;;AAAA,mBAQSjB,QAAQ,CAAC,EAAD,CARjB;AAAA;AAAA,MAQ1BkB,aAR0B;AAAA,MAQXC,gBARW;;AAAA,mBASqBnB,QAAQ,CAAC,EAAD,CAT7B;AAAA;AAAA,MAS1BoB,mBAT0B;AAAA,MASLC,sBATK;;AAAA,mBAULrB,QAAQ,CAAC,CAAD,CAVH;AAAA;AAAA,MAU1BsB,MAV0B;AAAA,MAUlBC,SAVkB;;AAAA,oBAWGvB,QAAQ,CAAC,CAAD,CAXX;AAAA;AAAA,MAW1BwB,UAX0B;AAAA,MAWdC,aAXc;;AAAA,oBAYCzB,QAAQ,CAAC,EAAD,CAZT;AAAA;AAAA,MAY1B0B,SAZ0B;AAAA,MAYfC,YAZe;;AAAA,oBAaL3B,QAAQ,CAAC,YAAD,CAbH;AAAA;AAAA,MAa1B4B,MAb0B;AAAA,MAalBC,SAbkB;;AAAA,oBAcK7B,QAAQ,CAACU,cAAc,CAACC,OAAf,CAAuB,aAAvB,CAAD,CAdb;AAAA;AAAA,MAc1BmB,WAd0B;AAAA,MAcbC,cAda;;AAAA,oBAeG/B,QAAQ,CAAC,KAAD,CAfX;AAAA;AAAA,MAe1BgC,UAf0B;AAAA,MAedC,aAfc;;AAAA,oBAgBSjC,QAAQ,CAAC,CAAD,CAhBjB;AAAA;AAAA,MAgB1BkC,aAhB0B;AAAA,MAgBXC,gBAhBW;;AAAA,oBAiBGnC,QAAQ,CAAC,EAAD,CAjBX;AAAA;AAAA,MAiB1BoC,UAjB0B;AAAA,MAiBdC,aAjBc;;AAAA,oBAkBWrC,QAAQ,CAAC,EAAD,CAlBnB;AAAA;AAAA,MAkB1BsC,cAlB0B;AAAA,MAkBVC,iBAlBU;;AAAA,oBAmBiBvC,QAAQ,CAAC,CAAD,CAnBzB;AAAA;AAAA,MAmB1BwC,iBAnB0B;AAAA,MAmBPC,oBAnBO;;AAAA,oBAoBqBzC,QAAQ,CAAC,CAAD,CApB7B;AAAA;AAAA,MAoB1B0C,mBApB0B;AAAA,MAoBLC,sBApBK;;AAAA,oBAqBW3C,QAAQ,CAAC,KAAD,CArBnB;AAAA;AAAA,MAqB1B4C,cArB0B;AAAA,MAqBVC,iBArBU;;AAAA,oBAsBC7C,QAAQ,CAAC,KAAD,CAtBT;AAAA;AAAA,MAsB1B8C,SAtB0B;AAAA,MAsBfC,YAtBe;;AAAA,oBAuBS/C,QAAQ,CAAC,KAAD,CAvBjB;AAAA;AAAA,MAuB1BgD,aAvB0B;AAAA,MAuBXC,gBAvBW;;AAyBjC,MAAMC,aAAa,GAAG,sCAAtB;AACA,MAAMC,cAAc,GAAG,sCAAvB;;AAEA,MAAMC,WAAW,GAAG,SAAdA,WAAc,GAAM;AACvBC,IAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACDL,IAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACD,GAHD;;AA5BiC,4BAiCP5C,kBAAkB,CAAC;AAACkD,IAAAA,KAAK,EAAEH;AAAR,GAAD,CAjCX;AAAA,MAiCzBI,KAjCyB,uBAiCzBA,KAjCyB;AAAA,MAiClBC,MAjCkB,uBAiClBA,MAjCkB;;AAmCjC,MAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,KAAD,EAAQC,KAAR,EAAkB;AACzC7C,IAAAA,QAAQ,CAAC4C,KAAD,CAAR;AACAE,IAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BH,KAA9B;AACA1B,IAAAA,aAAa,CAAC,KAAD,CAAb;AACH,GAJD;;AAMA,MAAM8B,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAG;AAAA;;AAAA;AAAA;AAAA;AAAA;AACdlC,cAAAA,SAAS,CAAC,yBAAD,CAAT;AADc;AAAA,qBAESmC,KAAK,CAC1B,8CAD0B,EAE1B;AACEC,gBAAAA,MAAM,EAAE,MADV;AAEEC,gBAAAA,OAAO,EAAE;AACP,qCAAmB,0BADZ;AAEP,oCAAkB,oDAFX;AAEiE;AACxE,kCAAgB,kBAHT;AAIPC,kBAAAA,MAAM,EAAE;AAJD,iBAFX;AAQEC,gBAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBC,kBAAAA,WAAW,EAAEzD,KADM;AAEnB0D,kBAAAA,KAAK,EAAE,IAFY;AAGnBC,kBAAAA,WAAW,EAAEnD;AAHM,iBAAf;AARR,eAF0B,CAFd;;AAAA;AAERoD,cAAAA,QAFQ;AAmBd7C,cAAAA,SAAS,CAAC,0BAAD,CAAT;AAnBc;AAAA,qBAoBa6C,QAAQ,CAACC,IAAT,EApBb;;AAAA;AAoBRC,cAAAA,YApBQ;;AAAA,kBAqBTF,QAAQ,CAACG,EArBA;AAAA;AAAA;AAAA;;AAsBIC,cAAAA,OAtBJ,mCAsBuCJ,QAAQ,CAACK,MAtBhD;AAAA,oBAuBI,IAAIC,KAAJ,CAAUF,OAAV,CAvBJ;;AAAA;AA0BVG,cAAAA,eA1BU,GA0BQ;AACpBF,gBAAAA,MAAM,EAAE;AAAEG,kBAAAA,WAAW,EAAE;AAAf,iBADY;AAEpBC,gBAAAA,MAAM,EAAE,IAFY;AAGpBC,gBAAAA,cAAc,EAAE;AAHI,eA1BR;;AAAA;AAAA,oBAiCZH,eAAe,CAACF,MAAhB,CAAuBG,WAAvB,KAAuC,UAAvC,IACAD,eAAe,CAACE,MAAhB,IAA0B,IAD1B,IAEAF,eAAe,CAACG,cAAhB,IAAkC,IAnCtB;AAAA;AAAA;AAAA;;AAqCZvD,cAAAA,SAAS,kGAA2FoD,eAAe,CAACF,MAAhB,CAAuBG,WAAlH,EAAT;;AArCY,mBAsCRN,YAAY,CAACS,KAtCL;AAAA;AAAA;AAAA;;AAuCNC,cAAAA,GAvCM,0DAuCgDV,YAAY,CAACS,KAvC7D;AAAA;AAAA,qBAyCgBrB,KAAK,CAACsB,GAAD,EAAM;AACnCrB,gBAAAA,MAAM,EAAE,KAD2B;AAEnCC,gBAAAA,OAAO,EAAE;AACP,qCAAmB,0BADZ;AAEP,oCAAkB,oDAFX;AAEiE;AACxE,kCAAgB;AAHT;AAF0B,eAAN,CAzCrB;;AAAA;AAyCJqB,cAAAA,WAzCI;AAAA;AAAA,qBAkDcA,WAAW,CAACZ,IAAZ,EAlDd;;AAAA;AAkDVM,cAAAA,eAlDU;;AAAA;AAAA;AAAA;;AAAA;AAqDd,kBAAIA,eAAe,CAACO,MAApB,EAA4B;AACpB5D,gBAAAA,OADoB,GACX6D,IAAI,CAACR,eAAe,CAACO,MAAjB,CADO;AAE1BnC,gBAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0B1B,OAA1B;AACAS,gBAAAA,aAAa,CAACT,OAAD,CAAb;AACAC,gBAAAA,SAAS,sBAAeD,OAAf,gCAA2CqD,eAAe,CAACS,IAA3D,kCAAuFT,eAAe,CAACU,MAAvG,YAAT;AACAC,gBAAAA,mBAAmB;AACpB,eAND,MAMO,IAAIX,eAAe,CAACE,MAApB,EAA4B;AAC3BU,gBAAAA,KAD2B,GACnBJ,IAAI,CAACR,eAAe,CAACE,MAAjB,CADe;AAEjCtD,gBAAAA,SAAS,qBAAcgE,KAAd,EAAT;AACD,eAHM,MAGA;AACCC,gBAAAA,iBADD,GACqBL,IAAI,CAACR,eAAe,CAACG,cAAjB,CADzB;AAEDW,gBAAAA,QAFC,GAEUvD,iBAAiB,GAAG,CAF9B;AAGLC,gBAAAA,oBAAoB,CAACsD,QAAD,CAApB;AACA1C,gBAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCd,iBAAhC;AACAX,gBAAAA,SAAS,qBAAciE,iBAAd,EAAT;AACAE,gBAAAA,qBAAqB;AACtB;;AArEa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAATjC,SAAS;AAAA;AAAA;AAAA,KAAf;;AAwEA,MAAMkC,GAAG,GAAG,SAANA,GAAM,CAACC,CAAD,EAAO;AACjBjE,IAAAA,aAAa,CAAC,IAAD,CAAb;AAEA;;;;;;AAMA8B,IAAAA,SAAS;AACV,GAVD;;AAYA,MAAMoC,MAAM,GAAG,SAATA,MAAS,CAACD,CAAD,EAAO;AACpBnD,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACA,QAAMqD,WAAW,GAAGpC,KAAK,CAAC1D,SAAS,CAAC+F,QAAV,CAAmBC,YAApB,EAAkC;AACnDrC,MAAAA,MAAM,EAAE,MAD2C;AAEnDC,MAAAA,OAAO,EAAE;AACP,kBAAU,kBADH;AAEP,wBAAgB;AAFT,OAF0C;AAMnDE,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACtB,iBAAS,wBADa;AAEtB,oBAAY;AAFU,OAAf;AAN6C,KAAlC,CAAL,CASViC,IATU,CASL,UAACC,GAAD,EAAO;AACf,UAAIA,GAAG,GAAGA,GAAG,CAAC7B,IAAJ,EAAV;AACA6B,MAAAA,GAAG,CAACD,IAAJ,CAAS,UAASE,CAAT,EAAY;AACnBpD,QAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBmD,CAAC,CAACC,IAAxB;AACArD,QAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BmD,CAAC,CAACC,IAAF,CAAOC,YAApC;AACI,YAAIC,WAAW,GAAGH,CAAC,CAACC,IAAF,CAAOC,YAAzB;AACAE,QAAAA,sBAAsB,CAACD,WAAD,CAAtB;AACL,OALD;AAMD,KAjBc,CAApB;AAkBD,GApBD;;AAsBA,MAAMC,sBAAsB,GAAG,SAAzBA,sBAAyB,CAACD,WAAD,EAAiB;AACzC,QAAIE,SAAS,GAAGzC,IAAI,CAACC,SAAL,CAAeD,IAAI,CAAC0C,KAAL,CAAWlD,YAAY,CAAClD,OAAb,CAAqB,WAArB,CAAX,EAA8CqG,MAA7D,CAAhB;AACAF,IAAAA,SAAS,GAAGA,SAAS,CAACG,UAAV,CAAqB,GAArB,EAA0B,OAA1B,CAAZ;AACA,QAAMb,WAAW,GAAGpC,KAAK,CAAC1D,SAAS,CAAC+F,QAAV,CAAmBa,oBAApB,EAA0C;AAC/DjD,MAAAA,MAAM,EAAE,MADuD;AAE/DC,MAAAA,OAAO,EAAE;AACP,kBAAU,kBADH;AAEP,wBAAgB;AAFT,OAFsD;AAM/DE,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACtB,sBAAc9C,UADQ;AAEtB,qBAAa2F,QAAQ,CAACzG,cAAc,CAACC,OAAf,CAAuB,uBAAvB,CAAD,EAAiD,EAAjD,CAFC;AAGtB,kBAASmG;AAHa,OAAf;AANyD,KAA1C,CAAL,CAUdP,IAVc,CAUT,UAACC,GAAD,EAAO;AACf,UAAIA,GAAG,GAAGA,GAAG,CAAC7B,IAAJ,EAAV;AACA6B,MAAAA,GAAG,CAACD,IAAJ,CAAS,UAASE,CAAT,EAAY;AACnBpD,QAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ;AACA8D,QAAAA,cAAc,CAACR,WAAD,CAAd;AACD,OAHD;AAIF,KAhBmB,CAApB;AAiBF,GApBL;;AAsBA,MAAMQ,cAAc,GAAG,SAAjBA,cAAiB,CAACR,WAAD,EAAiB;AACpC,QAAIS,wBAAwB,GAAG,CAA/B;AACA,QAAIC,YAAY,GAAG,CAAnB;AACA,QAAMC,oBAAoB,GAAG,CAA7B;AAEA,QAAIC,MAAM,GAAGC,QAAQ,CAACC,cAAT,CAAwB,SAAxB,EAAmCC,SAAnC,CAA6CV,UAA7C,CAAwD,GAAxD,EAA4D,EAA5D,EAAgEW,KAAhE,CAAsE,GAAtE,EAA2E,CAA3E,CAAb;AACA,QAAIC,MAAM,GAAGJ,QAAQ,CAACC,cAAT,CAAwB,SAAxB,EAAmCC,SAAnC,CAA6CV,UAA7C,CAAwD,GAAxD,EAA4D,EAA5D,EAAgEA,UAAhE,CAA2E,GAA3E,EAA+E,EAA/E,EAAmFW,KAAnF,CAAyF,GAAzF,EAA8F,CAA9F,CAAb;AAEA,QAAME,qBAAqB,GAAG5F,aAA9B;AACA,QAAM6F,gBAAgB,GAAGZ,QAAQ,CAACK,MAAD,EAAS,EAAT,CAAR,GAAuB,EAAvB,GAA4BL,QAAQ,CAACU,MAAD,EAAS,EAAT,CAA7D;AACAxE,IAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BwE,qBAA7B;AACAzE,IAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCyE,gBAAlC;AACAT,IAAAA,YAAY,GAAG,CAACQ,qBAAqB,GAAGC,gBAAzB,IAA2C,EAA1D;AACA1E,IAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCgE,YAAhC;;AAEA,QAAGlF,UAAU,IAAI,EAAd,IAAoBA,UAAU,CAAC4F,OAAX,CAAmB1F,cAAnB,KAAsC,CAA7D,EAAgE;AAC9D+E,MAAAA,wBAAwB,GAAG,GAA3B;AACD;;AACDY,IAAAA,gBAAgB,CAACrB,WAAD,EAAc,sBAAd,EAAsCS,wBAAtC,CAAhB;AACAY,IAAAA,gBAAgB,CAACrB,WAAD,EAAc,iBAAd,EAAiCU,YAAjC,CAAhB;AACAW,IAAAA,gBAAgB,CAACrB,WAAD,EAAc,wBAAd,EAAwCpE,iBAAxC,CAAhB;AACA9B,IAAAA,cAAc,CAACoD,OAAf,CAAuB,sBAAvB,EAA+CpD,cAAc,CAACC,OAAf,CAAuB,sBAAvB,IAA+C+B,mBAA/C,GAAmE,GAAlH;AACAwF,IAAAA,gBAAgB,CAACb,wBAAD,EAA2BC,YAA3B,EAAyC9E,iBAAzC,CAAhB;AACH,GAvBD;;AAyBA,MAAM0F,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACb,wBAAD,EAA2BC,YAA3B,EAAyC9E,iBAAzC,EAA+D;AACpF,QAAI2F,uBAAuB,GAAG,KAA9B;AACA,QAAIC,sBAAsB,GAAG1H,cAAc,CAACC,OAAf,CAAuB,iBAAvB,CAA7B;AACA,QAAI0H,mBAAmB,GAAGD,sBAA1B,CAHoF,CAKpF;;AACA,QAAId,YAAY,GAAC,EAAb,GAAmBpF,aAAa,GAAC,CAAjC,IACEM,iBAAiB,GAAG,EAD1B,EAC8B;AAC3B2F,MAAAA,uBAAuB,GAAG,IAA1B;AACF;;AACD,QAAIA,uBAAJ,EAA6B;AAC3B,UAAIC,sBAAsB,IAAI,UAA9B,EAA0C;AACxCC,QAAAA,mBAAmB,GAAG,cAAtB;AACD,OAFD,MAEO,IAAID,sBAAsB,IAAI,cAA9B,EAA8C;AACnDC,QAAAA,mBAAmB,GAAG,UAAtB;AACD;;AACD3H,MAAAA,cAAc,CAACoD,OAAf,CAAuB,iBAAvB,EAA0CuE,mBAA1C;AACAhF,MAAAA,OAAO,CAACC,GAAR,CAAY,8BAAZ;AACD;;AACD,QAAIV,cAAJ,EAAoB;AAClB0F,MAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,kBAAvB;AACD,KAFD,MAEO;AACLF,MAAAA,MAAM,CAACC,QAAP,CAAgBE,MAAhB;AACD;AACJ,GAxBD;;AA0BA,MAAMR,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACrB,WAAD,EAAc8B,MAAd,EAAsB/E,KAAtB,EAAgC;AACvD,QAAMyC,WAAW,GAAGpC,KAAK,CAAC1D,SAAS,CAAC+F,QAAV,CAAmBsC,cAAnB,GAAoC/B,WAArC,EAAkD;AACvE3C,MAAAA,MAAM,EAAE,MAD+D;AAEvEC,MAAAA,OAAO,EAAE;AACP,kBAAU,kBADH;AAEP,wBAAgB;AAFT,OAF8D;AAMvEE,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACtB,uBAAe9C,UADO;AAEtB,iCAAyB2F,QAAQ,CAACzG,cAAc,CAACC,OAAf,CAAuB,uBAAvB,CAAD,EAAiD,EAAjD,CAFX;AAGtB,kBAAU+H,MAHY;AAItB,iBAAS/E;AAJa,OAAf;AANiE,KAAlD,CAAL,CAWd4C,IAXc,CAWT,UAACC,GAAD,EAAO;AACf,UAAIA,GAAG,GAAGA,GAAG,CAAC7B,IAAJ,EAAV;AACA6B,MAAAA,GAAG,CAACD,IAAJ,CAAS,UAASE,CAAT,EAAY;AACnBpD,QAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBmD,CAAC,CAACC,IAAxB;AACD,OAFD;AAGF,KAhBmB,CAApB;AAiBD,GAlBD;;AAoBA,MAAMkC,uBAAuB,GAAG,SAA1BA,uBAA0B,CAACC,OAAD,EAAa;AAC3CA,IAAAA,OAAO,GAAGA,OAAO,CAACC,OAAR,CAAgB,MAAhB,EAAuB,EAAvB,CAAV;AACA,QAAIC,UAAU,GAAG5B,QAAQ,CAAC0B,OAAD,EAAU,EAAV,CAAzB;AACA,QAAIG,eAAe,GAAGD,UAAU,GAAG,EAAb,GAAkB,IAAxC;AACA,WAAOC,eAAP;AACD,GALD;;AAOA,MAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACC,SAAD,EAAe;AACzC,QAAIC,oBAAoB,GAAGP,uBAAuB,CAACM,SAAD,CAAlD;AACA,QAAIE,eAAe,GAAGD,oBAAoB,GAAC,IAA3C;AACA,QAAIE,cAAc,GAAGD,eAAe,GAAC,EAArC;AACA,QAAIE,sBAAsB,GAAGD,cAA7B;AACA,QAAIE,aAAa,GAAGpC,QAAQ,CAACzG,cAAc,CAACC,OAAf,CAAuB,eAAvB,CAAD,EAA0C,EAA1C,CAA5B;;AACA,QAAID,cAAc,CAACC,OAAf,CAAuB,wBAAvB,KAAoD,IAApD,IACGD,cAAc,CAACC,OAAf,CAAuB,wBAAvB,KAAoD,EAD3D,EAC+D;AAC3D2I,MAAAA,sBAAsB,GAAGA,sBAAsB,GAAGnC,QAAQ,CAACzG,cAAc,CAACC,OAAf,CAAuB,wBAAvB,CAAD,EAAmD,EAAnD,CAA1D;AACH;;AACDD,IAAAA,cAAc,CAACoD,OAAf,CAAuB,wBAAvB,EAAiDwF,sBAAjD,EAVyC,CAWzC;;AACA,QAAIC,aAAa,GAAGD,sBAAhB,GAAyC,EAA7C,EAAiD;AAC/CzG,MAAAA,iBAAiB,CAAC,IAAD,CAAjB;AACD;AACF,GAfD;;AAiBA,MAAM2G,kBAAkB,GAAG,SAArBA,kBAAqB,CAACN,SAAD,EAAe;AACxC,QAAIC,oBAAoB,GAAGP,uBAAuB,CAACM,SAAD,CAAlD;AACA,QAAIE,eAAe,GAAGD,oBAAoB,GAAC,IAA3C;AACA9F,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACAnB,IAAAA,gBAAgB,CAACiH,eAAD,CAAhB;AACA/F,IAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiC6F,oBAAjC;AACAM,IAAAA,UAAU,CAAC,YAAW;AACpBpG,MAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ;AACD,KAFS,EAEP6F,oBAFO,CAAV;AAGD,GATD;;AAWA,MAAMO,WAAW,GAAG,SAAdA,WAAc,CAAC9C,WAAD,EAAc+C,OAAd,EAAuBC,YAAvB,EAAqCC,eAArC,EAAyD;AACtExG,IAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACA,QAAM8C,WAAW,GAAGpC,KAAK,CAAC1D,SAAS,CAAC+F,QAAV,CAAmByD,WAAnB,GAAiClD,WAAjC,GAA+C,0CAA/C,GAA0FiD,eAA1F,GAA0G,4BAA1G,GAAuIF,OAAvI,GAA+I,6BAA/I,GAA6KC,YAA7K,GAA0L,KAA3L,CAAL,CAAuMrD,IAAvM,CAA4M,UAACC,GAAD,EAAO;AACtO,UAAIA,GAAG,GAAGA,GAAG,CAAC7B,IAAJ,EAAV;AACE6B,MAAAA,GAAG,CAACD,IAAJ,CAAS,UAASE,CAAT,EAAY;AACnB,YAAIsD,aAAa,GAAG,CAApB;AACA,YAAIC,QAAQ,GAAGvD,CAAC,CAACC,IAAjB;AACArD,QAAAA,OAAO,CAACC,GAAR,CAAY,gCAAZ,EAA8CyG,aAA9C;AACA1G,QAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8B0G,QAAQ,CAACC,MAAvC;;AACA,eAAMvJ,cAAc,CAACC,OAAf,CAAuB,sBAAvB,KAAkD,IAAlD,IACAD,cAAc,CAACC,OAAf,CAAuB,sBAAvB,KAAkD,EAAlD,IACDqJ,QAAQ,CAACC,MAAT,GAAkBF,aADjB,IAEDrJ,cAAc,CAACC,OAAf,CAAuB,sBAAvB,EAA+CqH,OAA/C,CAAuDgC,QAAQ,CAACD,aAAD,CAAR,CAAwBG,EAAxB,GAA2B,GAAlF,KAAwF,CAAC,CAH9F,EAGkG;AAC9F7G,UAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+ByG,aAA/B;AACA,cAAII,KAAK,GAAGH,QAAQ,CAACD,aAAD,CAAR,CAAwBI,KAApC;AACA,cAAIjF,WAAW,GAAG8E,QAAQ,CAACD,aAAD,CAAR,CAAwB7E,WAA1C;AACA,cAAIkF,WAAW,GAAGJ,QAAQ,CAACD,aAAD,CAAR,CAAwBM,YAA1C;AACA,cAAInB,SAAS,GAAGc,QAAQ,CAACD,aAAD,CAAR,CAAwBO,UAAxC;AACA7I,UAAAA,aAAa,CAACuI,QAAQ,CAACD,aAAD,CAAR,CAAwBG,EAAzB,CAAb;AACA7G,UAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6B8G,WAA7B;AACA/G,UAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyB4F,SAAzB;AACAM,UAAAA,kBAAkB,CAACN,SAAD,CAAlB;AACAD,UAAAA,mBAAmB,CAACC,SAAD,CAAnB;AACAnI,UAAAA,QAAQ,CAACqJ,WAAD,CAAR;AACAjJ,UAAAA,gBAAgB,CAACgJ,KAAD,CAAhB;AACA9I,UAAAA,sBAAsB,CAAC6D,WAAD,CAAtB;AACA3C,UAAAA,iBAAiB,CAACyH,QAAQ,CAACD,aAAD,CAAR,CAAwBQ,eAAzB,CAAjB;AACA5H,UAAAA,sBAAsB,CAACqH,QAAQ,CAACD,aAAD,CAAR,CAAwBG,EAAzB,CAAtB;AACAH,UAAAA,aAAa;AACb;AACH;AACF,OA3BD;AA4BD,KA9BkB,CAApB;AA+BF,GAjCL;;AAmCA,MAAMS,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AAC7B,QAAMpE,WAAW,GAAGpC,KAAK,CAAC1D,SAAS,CAAC+F,QAAV,CAAmBC,YAApB,EAAkC;AAClDrC,MAAAA,MAAM,EAAE,MAD0C;AAElDC,MAAAA,OAAO,EAAE;AACP,kBAAU,kBADH;AAEP,wBAAgB;AAFT,OAFyC;AAMlDE,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACtB,iBAAS,wBADa;AAEtB,oBAAY;AAFU,OAAf;AAN4C,KAAlC,CAAL,CASTiC,IATS,CASJ,UAACC,GAAD,EAAO;AACf,UAAIA,GAAG,GAAGA,GAAG,CAAC7B,IAAJ,EAAV;AACA6B,MAAAA,GAAG,CAACD,IAAJ,CAAS,UAASE,CAAT,EAAY;AACnBpD,QAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBmD,CAAC,CAACC,IAAxB;AACArD,QAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BmD,CAAC,CAACC,IAAF,CAAOC,YAArC;AACI,YAAIC,WAAW,GAAGH,CAAC,CAACC,IAAF,CAAOC,YAAzB;AACA,YAAIkD,eAAe,GAAGnJ,cAAc,CAACC,OAAf,CAAuB,iBAAvB,CAAtB,CAJe,CAIkD;;AACjE,YAAIgJ,OAAO,GAAGjJ,cAAc,CAACC,OAAf,CAAuB,cAAvB,CAAd,CALe,CAKuC;;AACtD,YAAIiJ,YAAY,GAAGlJ,cAAc,CAACC,OAAf,CAAuB,cAAvB,CAAnB,CANe,CAM4C;;AAC3D+I,QAAAA,WAAW,CAAC9C,WAAD,EAAc+C,OAAd,EAAuBC,YAAvB,EAAqCC,eAArC,CAAX;AAEL,OATD;AAUD,KArBa,CAApB;AAsBD,GAvBD;;AAwBA,MAAI7C,MAAM,GAAG,EAAb;;AACA,MAAMyD,kBAAkB,GAAG,SAArBA,kBAAqB,GAAM;AAE/B,QAAG,OAAOnC,MAAM,CAACoC,KAAd,IAAuB,WAA1B,EAAuC;AAAA,UAO1BC,IAP0B,GAOnC,SAASA,IAAT,GAAgB;AACd,YAAMvG,IAAI,GAAGC,IAAI,CAACC,SAAL,CAAe;AAAE0C,UAAAA,MAAM,EAANA;AAAF,SAAf,CAAb;AACAnD,QAAAA,YAAY,CAACC,OAAb,CAAqB,WAArB,EAAkCM,IAAlC;AACAf,QAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0Bc,IAA1B;AACA;;;;;;AAMD,OAjBkC;;AACrCkE,MAAAA,MAAM,CAACoC,KAAP,CAAaE,MAAb,CAAoB;AAChBC,QAAAA,IADgB,gBACXjH,KADW,EACJ;AACV;AACAoD,UAAAA,MAAM,CAAC8D,IAAP,CAAYlH,KAAZ;AACD;AAJe,OAApB;AAiBEmH,MAAAA,WAAW,CAACJ,IAAD,EAAO,KAAK,IAAZ,CAAX;AACH;AACF,GAtBD;;AAwBA,MAAM/E,mBAAmB,GAAG,SAAtBA,mBAAsB,GAAM;AAChCpC,IAAAA,KAAK,CAAC;AAAEwH,MAAAA,IAAI,EAAE,yCAAR;AAAmDC,MAAAA,KAAK,EAAExH,MAAM,CAAC,CAAD,CAAhE;AAAqEyH,MAAAA,IAAI,EAAE,CAA3E;AAA8EC,MAAAA,KAAK,EAAE;AAArF,KAAD,CAAL;AACAlI,IAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACD,GAHD;;AAKA,MAAM+C,qBAAqB,GAAG,SAAxBA,qBAAwB,GAAM;AAClCxC,IAAAA,KAAK,CAAC;AAAEwH,MAAAA,IAAI,EAAE,8DAAR;AAAwEC,MAAAA,KAAK,EAAExH,MAAM,CAAC,CAAD,CAArF;AAA0FyH,MAAAA,IAAI,EAAE,GAAhG;AAAqGC,MAAAA,KAAK,EAAE;AAA5G,KAAD,CAAL;AACAlI,IAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACD,GAHD;;AAKA,MAAMmI,WAAW,GAAG,SAAdA,WAAc,GAAK;AACvB5H,IAAAA,KAAK,CAAC;AAAEwH,MAAAA,IAAI,EAAE9J,aAAR;AAAuB+J,MAAAA,KAAK,EAAExH,MAAM,CAAC,CAAD,CAApC;AAAyCyH,MAAAA,IAAI,EAAE,CAA/C;AAAkDC,MAAAA,KAAK,EAAE;AAAzD,KAAD,CAAL;AACAlI,IAAAA,gBAAgB,CAAC,IAAD,CAAhB;AAEAwG,IAAAA,UAAU,CAAC,YAAW;AAClBjG,MAAAA,KAAK,CAAC;AAAEwH,QAAAA,IAAI,EAAE,SAAOhK,IAAP,GAAY,qBAApB;AAA2CiK,QAAAA,KAAK,EAAExH,MAAM,CAAC,CAAD,CAAxD;AAA6DyH,QAAAA,IAAI,EAAE,CAAnE;AAAsEC,QAAAA,KAAK,EAAE;AAA7E,OAAD,CAAL;AACAlI,MAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACA;;;;;;;;AAQH,KAXS,EAWP,IAXO,CAAV;AAYD,GAhBD;;AAkBA,MAAMoI,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AAExB,QAAMC,GAAG,GAAG,IAAIhD,MAAM,CAACiD,QAAX,CAAoB;AAChCC,MAAAA,KAAK,EAAE,MADyB;AAEhCC,MAAAA,SAAS,EAAEhE,QAAQ,CAACC,cAAT,CAAwB,2BAAxB,CAFqB;AAGhCgE,MAAAA,SAAS,EAAE;AAHqB,KAApB,CAAZ;AAMAjC,IAAAA,UAAU,CAAC,wDAAD,EAA0D,IAA1D,CAAV,CARwB,CAUxB;;AAEA;;;;;;;;;;;;;AAaH,GAzBD;;AA2BAxJ,EAAAA,SAAS,CAAC,YAAM;AAChBqI,IAAAA,MAAM,CAACqD,SAAP,GAAmB,IAAnB;AAEA1K,IAAAA,OAAO,CAACP,cAAc,CAACC,OAAf,CAAuB,gBAAvB,CAAD,CAAP;AACAY,IAAAA,SAAS,CAACd,YAAD,CAAT;AACAoD,IAAAA,YAAY,CAACC,OAAb,CAAqB,aAArB,EAAmCrD,YAAnC;;AACA,QAAIoD,YAAY,CAAClD,OAAb,CAAqB,OAArB,KAAiC,IAArC,EAA2C;AAC3C0C,MAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ,EAA6CO,YAAY,CAAClD,OAAb,CAAqB,OAArB,CAA7C;AACEoB,MAAAA,cAAc,CAAC8B,YAAY,CAAClD,OAAb,CAAqB,OAArB,CAAD,CAAd;AACAI,MAAAA,QAAQ,CAAC8C,YAAY,CAAClD,OAAb,CAAqB,OAArB,CAAD,CAAR;AACD;;AAGD6J,IAAAA,gBAAgB;AAEhBC,IAAAA,kBAAkB;AAElBY,IAAAA,aAAa,GAjBG,CAoBhB;;AACI,QAAIxK,MAAJ,EAAY;AACVwC,MAAAA,OAAO,CAACC,GAAR,CAAY,8BAAZ,EAA4CzC,MAA5C;AACD;AACF,GAxBM,EAwBJ,EAxBI,CAAT;AA+BA,SACE,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAS,IAAA,KAAK,EAAC,SAAf;AAAyB,IAAA,KAAK,EAAE;AAAC+K,MAAAA,UAAU,EAAE,MAAb;AAAqBC,MAAAA,SAAS,EAAE;AAAhC,KAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEE;AAAK,IAAA,KAAK,EAAC,WAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACA;AAAQ,IAAA,EAAE,EAAC,qBAAX;AAAiC,IAAA,KAAK,EAAE;AAACC,MAAAA,OAAO,EAAE;AAAV,KAAxC;AAA2D,IAAA,OAAO,EAAE;AAAA,aAAMV,WAAW,EAAjB;AAAA,KAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADA,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,EAAE,EAAC,2BAAR;AAAoC,IAAA,KAAK,EAAE;AAACU,MAAAA,OAAO,EAAE9I,aAAa,GAAG,OAAH,GAAa;AAApC,KAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAFF,EAKE;AAAK,IAAA,KAAK,EAAE;AAAC+I,MAAAA,KAAK,EAAE;AAAR,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAN,aADF,EAC2C,oBAAC,KAAD;AAAO,IAAA,OAAO,EAAE7J,aAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAD3C,CALF,EAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,KAAK,EAAE;AAAC8J,MAAAA,UAAU,EAAE;AAAb,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAkC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAlC,cAA2E9K,aAA3E,cAAsGE,mBAAtG,EAA0H;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAA1H,EAA+H;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAA/H,EAA4I;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAA5I,EAAiJ;AAAM,IAAA,KAAK,EAAE;AAAC6K,MAAAA,KAAK,EAAE;AAAR,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAuCjL,IAAvC,yBAAjJ,EACE;AAAM,IAAA,KAAK,EAAE;AAACiL,MAAAA,KAAK,EAAC,MAAP;AAAcC,MAAAA,QAAQ,EAAC;AAAvB,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAA6D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAA7D,mCADF,CADF,EAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJF,EAKE;AAAK,IAAA,EAAE,EAAC,WAAR;AAAoB,IAAA,KAAK,EAAC,gCAA1B;AAA2D,IAAA,KAAK,EAAE;AAACC,MAAAA,KAAK,EAAE,MAAR;AAAeC,MAAAA,MAAM,EAAE;AAAvB,KAAlE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,MAAD;AACM,IAAA,eAAe,EAAEpL,IADvB;AAEM,IAAA,YAAY,EAAEc,WAFpB;AAGM,IAAA,QAAQ,EAAE4B,kBAHhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CALF,EAYG1B,UAAU,IAAI;AAAK,IAAA,EAAE,EAAC,iBAAR;AAA0B,IAAA,KAAK,EAAC,gCAAhC;AAAiE,IAAA,KAAK,EAAE;AAACmK,MAAAA,KAAK,EAAE,MAAR;AAAeC,MAAAA,MAAM,EAAE;AAAvB,KAAxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACb;AAAU,IAAA,QAAQ,MAAlB;AAAmB,IAAA,KAAK,EAAC,QAAzB;AAAkC,IAAA,KAAK,EAAC,OAAxC;AAAgD,IAAA,MAAM,EAAC,OAAvD;AAA+D,IAAA,SAAS,EAAC;AAAzE,oDAAqHxK,MAArH;AAAA;AAAA;AAAA,mFADa,CAZjB,EAkBE;AAAK,IAAA,KAAK,EAAC,eAAX;AAA2B,IAAA,KAAK,EAAE;AAACsK,MAAAA,QAAQ,EAAE,MAAX;AAAkBJ,MAAAA,OAAO,EAAE,OAA3B;AAAmCO,MAAAA,MAAM,EAAE,QAA3C;AAAoDC,MAAAA,IAAI,EAAE,GAA1D;AAA8DC,MAAAA,KAAK,EAAE,GAArE;AAAyEC,MAAAA,SAAS,EAAE,QAApF;AAA8FC,MAAAA,MAAM,EAAE;AAAtG,KAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,eAAf;AAA+B,IAAA,KAAK,EAAE;AAACZ,MAAAA,SAAS,EAAE;AAAZ,KAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAM,IAAA,SAAS,EAAC,wBAAhB;AAAyC,IAAA,OAAO,EAAE,mBAAI;AAAC5F,MAAAA,GAAG;AAAG,KAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,EAGI,CAACrD,cAAD,GAAkB;AAAM,IAAA,SAAS,EAAC,qDAAhB;AAAsE,IAAA,OAAO,EAAE,mBAAI;AAACuD,MAAAA,MAAM;AAAG,KAA7F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAAlB,GACE,0CAAE;AAAM,IAAA,SAAS,EAAC,qDAAhB;AAAsE,IAAA,OAAO,EAAE,mBAAI;AAACA,MAAAA,MAAM;AAAG,KAA7F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAF,EACF;AAAK,IAAA,KAAK,EAAC,gDAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sDADE,CAJN,CADF,CAlBF,CARF,CAFF,CADF,CADF,EAgDIrD,SAAS,IAAI;AAAK,IAAA,KAAK,EAAC,kCAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA8C;AAAM,IAAA,KAAK,EAAC,wBAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAA9C,CAhDjB,EAiDE;AAAK,IAAA,KAAK,EAAC,uEAAX;AAAmF,IAAA,KAAK,EAAE;AAAC2J,MAAAA,MAAM,EAAE,IAAT;AAAeN,MAAAA,KAAK,EAAC,MAArB;AAA6BC,MAAAA,MAAM,EAAE;AAArC,KAA1F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,KAAK,EAAC,aAAX;AAAyB,IAAA,KAAK,EAAE;AAACK,MAAAA,MAAM,EAAE;AAAT,KAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE;AAAK,IAAA,KAAK,EAAC,uBAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAG,IAAA,KAAK,EAAC,+CAAT;AAAyD,IAAA,IAAI,EAAC,GAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,GAAG,EAAC,uCAAT;AAAiD,IAAA,GAAG,EAAC,EAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,CAFF,EAOE;AAAO,IAAA,KAAK,EAAC,uGAAb;AAAqH,IAAA,KAAK,EAAE;AAACL,MAAAA,MAAM,EAAE,MAAT;AAAgBD,MAAAA,KAAK,EAAE,OAAvB;AAAgCO,MAAAA,SAAS,EAAE;AAA3C,KAA5H;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAG,IAAA,KAAK,EAAC,qDAAT;AAA+D,IAAA,IAAI,EAAC,GAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,GAAG,EAAC,4BAAT;AAAsC,IAAA,KAAK,EAAC,MAA5C;AAAmD,IAAA,KAAK,EAAE;AAACC,MAAAA,SAAS,EAAE,SAAZ;AAAuBR,MAAAA,KAAK,EAAC;AAA7B,KAA1D;AAAgG,IAAA,GAAG,EAAC,EAApG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,CADF,EAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,KAAK,EAAC,cAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA0B;AAAG,IAAA,KAAK,EAAC,8CAAT;AAAwD,IAAA,IAAI,EAAC,GAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAA1B,EAAqG;AAAG,IAAA,KAAK,EAAC,gCAAT;AAA0C,IAAA,IAAI,EAAC,GAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAArG,CADF,EAEE;AAAO,IAAA,KAAK,EAAC,2BAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAFF,CANF,CAPF,CAjDF,CAFF,EAwEE;AAAS,IAAA,KAAK,EAAC,eAAf;AAA+B,IAAA,EAAE,EAAC,QAAlC;AAA2C,IAAA,KAAK,EAAE;AAACP,MAAAA,UAAU,EAAE;AAAb,KAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,KAAK,EAAC,WAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,KAAK,EAAC,oCAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,KAAK,EAAC,0BAAX;AAAsC,IAAA,KAAK,EAAE;AAACC,MAAAA,SAAS,EAAE;AAAZ,KAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAI,IAAA,KAAK,EAAC,sBAAV;AAAiC,IAAA,KAAK,EAAE;AAACK,MAAAA,QAAQ,EAAE;AAAX,KAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE;AAAG,IAAA,KAAK,EAAC,0BAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAoC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAApC,EAAyC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAzC,EAA8C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAA9C,EAAmD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAnD,EAAwD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAxD,CAFF,CADF,EAME;AAAK,IAAA,KAAK,EAAC,QAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANF,CADF,CADF,CAxEF,CADF;AA4FC,CAzhBD;;AA0hBA,eAAe1L,gBAAf","sourcesContent":["import React from \"react\";\r\nimport {useState, useEffect, useRef} from \"react\";\r\nimport Editor, { useMonaco } from \"@monaco-editor/react\";\r\nimport { useSpeechSynthesis } from 'react-speech-kit';\r\nimport CONSTANTS from \"../../../constants\";\r\nimport \"./engine.module.css\";\r\nimport Timer from '../../core/timer';\r\n\r\nconst AssessmentEngine = ({}) => {\r\n\r\nconst LANG_ID_JAVA = sessionStorage.getItem('editorLangId');\r\nconst speechQuestionTitle = useRef(null);\r\n\r\nconst monaco = useMonaco();\r\nconst [input, setInput] = useState({});\r\nconst [lang, setLang] = useState(\"\");\r\nconst [questionTitle, setQuestionTitle] = useState(\"\");\r\nconst [questionDescription, setQuestionDescription] = useState(\"\");\r\nconst [langId, setLangId] = useState(0);\r\nconst [questionId, setQuestionId] = useState(0);\r\nconst [userInput, setUserInput] = useState({});\r\nconst [output, setOutput] = useState(\"Running...\");\r\nconst [defaultCode, setDefaultCode] = useState(sessionStorage.getItem('defaultCode'));\r\nconst [showOutput, setShowOutput] = useState(false);\r\nconst [timeRemaining, setTimeRemaining] = useState(0);\r\nconst [lastOutput, setLastOutput] = useState(\"\");\r\nconst [resultCriteria, setResultCriteria] = useState(\"\");\r\nconst [syntacticalErrors, setSyntacticalErrors] = useState(0);\r\nconst [attemptedQuestionId, setAttemptedQuestionId] = useState(0);\r\nconst [isLastQuestion, setIsLastQuestion] = useState(false);\r\nconst [isLoading, setIsLoading] = useState(false);\r\nconst [isVoiceActive, setIsVoiceActive] = useState(false);\r\n\r\nconst prompt_errors = '0d79dc22-de64-4f90-86da-3cd5a297fe5c';\r\nconst prompt_explain = '0d79dc22-de64-4f90-86da-3cd5a297fe5c';\r\n\r\nconst onSpeechEnd = () => {\r\n   console.log('on end');\r\n  setIsVoiceActive(false);\r\n};\r\n\r\nconst { speak, voices } = useSpeechSynthesis({onEnd: onSpeechEnd,});\r\n\r\nconst handleEditorChange = (value, event) => {\r\n    setInput(value);\r\n    localStorage.setItem('input', value);\r\n    setShowOutput(false);\r\n};\r\n\r\nconst invokeAPI = async () => {\r\n    setOutput('Creating Submission ...');\r\n    const response = await fetch(\r\n      \"https://judge0-ce.p.rapidapi.com/submissions\",\r\n      {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"x-rapidapi-host\": \"judge0-ce.p.rapidapi.com\",\r\n          \"x-rapidapi-key\": \"a1504d0aebmsha2c15d90ecffa8dp117081jsn36e10aaf0ea7\", // Get yours for free at https://rapidapi.com/judge0-official/api/judge0-ce/\r\n          \"content-type\": \"application/json\",\r\n          accept: \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          source_code: input,\r\n          stdin: null,\r\n          language_id: langId,\r\n        }),\r\n      }\r\n    );\r\n    setOutput(\"Submission Created ...\\n\");\r\n    const jsonResponse = await response.json();\r\n    if (!response.ok) {\r\n                const message = `An error has occured: ${response.status}`;\r\n                throw new Error(message);\r\n              }\r\n\r\n    let jsonGetSolution = {\r\n      status: { description: \"Queue\" },\r\n      stderr: null,\r\n      compile_output: null,\r\n    };\r\n\r\n    while (\r\n      jsonGetSolution.status.description !== \"Accepted\" &&\r\n      jsonGetSolution.stderr == null &&\r\n      jsonGetSolution.compile_output == null\r\n    ) {\r\n      setOutput(`Creating Submission ... \\nSubmission Created ...\\nChecking Submission Status\\nstatus : ${jsonGetSolution.status.description}`);\r\n      if (jsonResponse.token) {\r\n        let url = `https://judge0-ce.p.rapidapi.com/submissions/${jsonResponse.token}?base64_encoded=true`;\r\n\r\n        const getSolution = await fetch(url, {\r\n          method: \"GET\",\r\n          headers: {\r\n            \"x-rapidapi-host\": \"judge0-ce.p.rapidapi.com\",\r\n            \"x-rapidapi-key\": \"a1504d0aebmsha2c15d90ecffa8dp117081jsn36e10aaf0ea7\", // Get yours for free at https://rapidapi.com/judge0-official/api/judge0-ce/\r\n            \"content-type\": \"application/json\",\r\n          },\r\n        });\r\n\r\n        jsonGetSolution = await getSolution.json();\r\n      }\r\n    }\r\n    if (jsonGetSolution.stdout) {\r\n      const output = atob(jsonGetSolution.stdout);\r\n      console.log('--output--', output);\r\n      setLastOutput(output);\r\n      setOutput(`Results :\\n${output}\\nExecution Time : ${jsonGetSolution.time} Secs\\nMemory used : ${jsonGetSolution.memory} bytes`);\r\n      sayExecutionSuccess();\r\n    } else if (jsonGetSolution.stderr) {\r\n      const error = atob(jsonGetSolution.stderr);\r\n      setOutput(`\\n Error :${error}`);\r\n    } else {\r\n      const compilation_error = atob(jsonGetSolution.compile_output);\r\n      let errCount = syntacticalErrors + 1;\r\n      setSyntacticalErrors(errCount);\r\n      console.log('syntacticalError', syntacticalErrors);\r\n      setOutput(`\\n Error :${compilation_error}`);\r\n      sayCompilationFailure();\r\n    }\r\n}\r\n\r\nconst run = (e) => {\r\n  setShowOutput(true);\r\n\r\n  /* window.addEventListener('unhandledrejection', event => { console.log('E: ',event); });\r\n  onunhandledrejection = event => {\r\n    alert('There was an error submitting your code. Pls check your syntax & try again.')\r\n    console.log('invoke API '); //window.location.reload();\r\n  }; */\r\n\r\n  invokeAPI();\r\n}\r\n\r\nconst submit = (e) => {\r\n  setIsLoading(true);\r\n  const rawResponse = fetch(CONSTANTS.ENDPOINT.DIRECTUSAUTH, {\r\n          method: 'POST',\r\n          headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify({\r\n         \"email\": \"stint.assess@gmail.com\",\r\n         \"password\": \"dstintapp1\"\r\n       })}).then((res)=>{\r\n         var res = res.json();\r\n         res.then(function(r) {\r\n           console.log('Data: ', r.data);\r\n           console.log('AccessToken: ', r.data.access_token);\r\n               var accessToken = r.data.access_token;\r\n               createSessionRecording(accessToken);\r\n         });\r\n       });\r\n}\r\n\r\nconst createSessionRecording = (accessToken) => {\r\n       let recording = JSON.stringify(JSON.parse(localStorage.getItem('recording')).events);\r\n       recording = recording.replaceAll(\"'\", \"&quot\");\r\n       const rawResponse = fetch(CONSTANTS.ENDPOINT.POSTSESSIONRECORDING, {\r\n           method: 'POST',\r\n           headers: {\r\n             'Accept': 'application/json',\r\n             'Content-Type': 'application/json'\r\n           },\r\n           body: JSON.stringify({\r\n          \"questionId\": questionId,\r\n          \"sessionId\": parseInt(sessionStorage.getItem('assessment_session_id'),10),\r\n          \"events\":recording\r\n        })}).then((res)=>{\r\n          var res = res.json();\r\n          res.then(function(r) {\r\n            console.log('session recording submitted');\r\n            captureResults(accessToken);\r\n          });\r\n       });\r\n    }\r\n\r\nconst captureResults = (accessToken) => {\r\n    let solutionCorrectnessValue = 0;\r\n    let timeTakenMin = 0;\r\n    const numSyntacticalErrors = 0;\r\n\r\n    let minRem = document.getElementById('timeRem').innerHTML.replaceAll(' ','').split(':')[1];\r\n    let secRem = document.getElementById('timeRem').innerHTML.replaceAll(' ','').replaceAll('s','').split(':')[2];\r\n\r\n    const questionTimeLimitSecs = timeRemaining;\r\n    const secondsRemaining = parseInt(minRem, 10) * 60 + parseInt(secRem, 10);\r\n    console.log('--timeLimit--', questionTimeLimitSecs);\r\n    console.log('--secondsElapsed--', secondsRemaining);\r\n    timeTakenMin = (questionTimeLimitSecs - secondsRemaining)/60;\r\n    console.log('--timeTakenMin--', timeTakenMin);\r\n\r\n    if(lastOutput != \"\" && lastOutput.indexOf(resultCriteria) >= 0) {\r\n      solutionCorrectnessValue = 100;\r\n    }\r\n    createEvaluation(accessToken, \"solution_correctness\", solutionCorrectnessValue);\r\n    createEvaluation(accessToken, \"time_taken_mins\", timeTakenMin);\r\n    createEvaluation(accessToken, \"num_syntactical_errors\", syntacticalErrors);\r\n    sessionStorage.setItem(\"attemptedQuestionIds\", sessionStorage.getItem('attemptedQuestionIds')+attemptedQuestionId+',');\r\n    loadNextQuestion(solutionCorrectnessValue, timeTakenMin, syntacticalErrors);\r\n}\r\n\r\nconst loadNextQuestion = (solutionCorrectnessValue, timeTakenMin, syntacticalErrors) => {\r\n    var progressDifficultyLevel = false;\r\n    var currentDifficultyLevel = sessionStorage.getItem(\"difficultyLevel\");\r\n    var nextDifficultyLevel = currentDifficultyLevel;\r\n\r\n    //completed in half the time\r\n    if (timeTakenMin*60  < timeRemaining/2\r\n       && syntacticalErrors < 30) {\r\n       progressDifficultyLevel = true;\r\n    }\r\n    if (progressDifficultyLevel) {\r\n      if (currentDifficultyLevel == 'Beginner') {\r\n        nextDifficultyLevel = \"Intermediate\";\r\n      } else if (currentDifficultyLevel == 'Intermediate') {\r\n        nextDifficultyLevel = \"Advanced\";\r\n      }\r\n      sessionStorage.setItem(\"difficultyLevel\", nextDifficultyLevel);\r\n      console.log('Difficulty level progressed!');\r\n    }\r\n    if (isLastQuestion) {\r\n      window.location.href = '/assessment/done';\r\n    } else {\r\n      window.location.reload();\r\n    }\r\n}\r\n\r\nconst createEvaluation = (accessToken, metric, value) => {\r\n  const rawResponse = fetch(CONSTANTS.ENDPOINT.POSTEVALUATION + accessToken, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n     \"question_id\": questionId,\r\n     \"assessment_session_id\": parseInt(sessionStorage.getItem('assessment_session_id'),10),\r\n     \"metric\": metric,\r\n     \"value\": value\r\n   })}).then((res)=>{\r\n     var res = res.json();\r\n     res.then(function(r) {\r\n       console.log('Data: ', r.data);\r\n     });\r\n  });\r\n}\r\n\r\nconst getTimeLimitInMilliSecs = (timeStr) => {\r\n  timeStr = timeStr.replace(' min','');\r\n  var timeInMins = parseInt(timeStr, 10);\r\n  var timeInMilliSecs = timeInMins * 60 * 1000;\r\n  return timeInMilliSecs;\r\n}\r\n\r\nconst checkIsLastQuestion = (timeLimit) => {\r\n  var timeLimitInMilliSecs = getTimeLimitInMilliSecs(timeLimit);\r\n  var timeLimitInSecs = timeLimitInMilliSecs/1000;\r\n  var timeLimitInMin = timeLimitInSecs/60;\r\n  var activeQuestionDuration = timeLimitInMin;\r\n  var totalDuration = parseInt(sessionStorage.getItem('totalDuration'), 10);\r\n  if (sessionStorage.getItem('activeQuestionDuration') != null\r\n      && sessionStorage.getItem('activeQuestionDuration') != \"\") {\r\n      activeQuestionDuration = activeQuestionDuration + parseInt(sessionStorage.getItem('activeQuestionDuration'), 10);\r\n  }\r\n  sessionStorage.setItem('activeQuestionDuration', activeQuestionDuration);\r\n  // make current question as last question if time remaining < 10 min\r\n  if (totalDuration - activeQuestionDuration < 10) {\r\n    setIsLastQuestion(true);\r\n  }\r\n}\r\n\r\nconst startQuestionTimer = (timeLimit) => {\r\n  var timeLimitInMilliSecs = getTimeLimitInMilliSecs(timeLimit);\r\n  var timeLimitInSecs = timeLimitInMilliSecs/1000;\r\n  console.log('::timer::')\r\n  setTimeRemaining(timeLimitInSecs);\r\n  console.log('timeInMilliSecs: ', timeLimitInMilliSecs);\r\n  setTimeout(function() {\r\n    console.log('load next question');\r\n  }, timeLimitInMilliSecs);\r\n}\r\n\r\nconst getQuestion = (accessToken, skillId, competencyId, difficultyLevel) => {\r\n       console.log('calling getQuestion...');\r\n       const rawResponse = fetch(CONSTANTS.ENDPOINT.GETQUESTION + accessToken + '&filter={ \"difficulty_level\": { \"_eq\": \"'+difficultyLevel+'\" }, \"skill_id\": { \"_eq\": '+skillId+' }, \"competency\": { \"_eq\": '+competencyId+' }}').then((res)=>{\r\n        var res = res.json();\r\n          res.then(function(r) {\r\n            var questionIndex = 0;\r\n            var question = r.data;\r\n            console.log('--question[questionIndex].id--', questionIndex);\r\n            console.log('--question[]--', question.length);\r\n            while(sessionStorage.getItem(\"attemptedQuestionIds\") == null\r\n              || (sessionStorage.getItem(\"attemptedQuestionIds\") != \"\"\r\n              && question.length > questionIndex\r\n              && sessionStorage.getItem(\"attemptedQuestionIds\").indexOf(question[questionIndex].id+',')==-1)) {\r\n                console.log('--questionIndex', questionIndex);\r\n                var title = question[questionIndex].title;\r\n                var description = question[questionIndex].description;\r\n                var codeSnippet = question[questionIndex].code_snippet;\r\n                var timeLimit = question[questionIndex].time_limit;\r\n                setQuestionId(question[questionIndex].id);\r\n                console.log('codeSnippet: ', codeSnippet);\r\n                console.log('timeLimit', timeLimit);\r\n                startQuestionTimer(timeLimit);\r\n                checkIsLastQuestion(timeLimit);\r\n                setInput(codeSnippet);\r\n                setQuestionTitle(title);\r\n                setQuestionDescription(description);\r\n                setResultCriteria(question[questionIndex].result_criteria);\r\n                setAttemptedQuestionId(question[questionIndex].id);\r\n                questionIndex++;\r\n                break;\r\n            }\r\n          });\r\n        });\r\n    }\r\n\r\nconst getQuestionToken = () => {\r\n  const rawResponse = fetch(CONSTANTS.ENDPOINT.DIRECTUSAUTH, {\r\n           method: 'POST',\r\n           headers: {\r\n             'Accept': 'application/json',\r\n             'Content-Type': 'application/json'\r\n           },\r\n           body: JSON.stringify({\r\n          \"email\": \"stint.assess@gmail.com\",\r\n          \"password\": \"dstintapp1\"\r\n        })}).then((res)=>{\r\n          var res = res.json();\r\n          res.then(function(r) {\r\n            console.log('Data: ', r.data);\r\n            console.log('AccessToken1: ', r.data.access_token);\r\n                var accessToken = r.data.access_token;\r\n                var difficultyLevel = sessionStorage.getItem(\"difficultyLevel\"); //read from session storage\r\n                var skillId = sessionStorage.getItem(\"primarySkill\"); //read from session storage\r\n                var competencyId = sessionStorage.getItem(\"competencyId\"); //read from session storage\r\n                getQuestion(accessToken, skillId, competencyId, difficultyLevel);\r\n\r\n          });\r\n        });\r\n}\r\nvar events = [];\r\nconst startSessionRecord = () => {\r\n\r\n  if(typeof window.rrweb != \"undefined\") {\r\n    window.rrweb.record({\r\n        emit(event) {\r\n          // push event into the events array\r\n          events.push(event);\r\n        },\r\n      });\r\n      function save() {\r\n        const body = JSON.stringify({ events });\r\n        localStorage.setItem('recording', body);\r\n        console.log('--events--', body);\r\n        /* new window.rrwebPlayer({\r\n          target: document.getElementById('container'), // customizable root element\r\n          props: {\r\n            events\r\n          },\r\n        }); */\r\n      }\r\n      setInterval(save, 15 * 1000);\r\n  }\r\n}\r\n\r\nconst sayExecutionSuccess = () => {\r\n  speak({ text: \"Great! Your code executed successfully.\", voice: voices[0], rate: 1, pitch: 1.7 });\r\n  setIsVoiceActive(true);\r\n}\r\n\r\nconst sayCompilationFailure = () => {\r\n  speak({ text: \"There-are some errors. Please-check your code and try again.\", voice: voices[0], rate: 1.1, pitch: 1.9 });\r\n  setIsVoiceActive(true);\r\n}\r\n\r\nconst startSpeech = ()=> {\r\n  speak({ text: questionTitle, voice: voices[0], rate: 1, pitch: 1.7 });\r\n  setIsVoiceActive(true);\r\n\r\n  setTimeout(function() {\r\n      speak({ text: \"Use \"+lang+\" to write your code\", voice: voices[0], rate: 1, pitch: 1.7 });\r\n      setIsVoiceActive(true);\r\n      /* setTimeout(function() {\r\n            speak({ text: \"You can think through an approach and once you're ready you can explain. This will be recorded and used during evaluation.\", voice: voices[0], rate: 1, pitch: 1.7 });\r\n            setIsVoiceActive(true);\r\n            setTimeout(function() {\r\n                        speak({ text: \"Please go ahead once you're-ready.\", voice: voices[0], rate: 1, pitch: 1.7 });\r\n                        setIsVoiceActive(true);\r\n                    }, 1500);\r\n        }, 1500); */\r\n  }, 1500);\r\n}\r\n\r\nconst startVoiceBot = () => {\r\n\r\n    const SW9 = new window.SiriWave({\r\n    style: \"ios9\",\r\n    container: document.getElementById(\"engine_container-9__1Cs0M\"),\r\n    autostart: true,\r\n    });\r\n\r\n    setTimeout(\"document.getElementById('speechQuestionTitle').click()\",2000);\r\n\r\n    //https://freetts.com/Home/PlayAudio?Language=en-IN&Voice=en-IN-Standard-C&TextMessage=Find%20the%20frequency%20of%20each%20number%20in%20the%20given%20arraylist.%20%3Cbreak%20time%3D%221s%22%20%2F%3E%20Print%20output%20to%20console%20in%20the%20format%20given.%20%3Cbreak%20time%3D%221.5s%22%20%2F%3EUse%20Java%20to%20write%20your%20code.&type=0\r\n\r\n    /* const rawResponse = fetch('https://freetts.com/Home/PlayAudio?Language=en-IN&Voice=en-IN-Standard-C&TextMessage=Find%20the%20frequency%20of%20each%20number%20in%20the%20given%20arraylist.%20%3Cbreak%20time%3D%221s%22%20%2F%3E%20Print%20output%20to%20console%20in%20the%20format%20given.%20%3Cbreak%20time%3D%221.5s%22%20%2F%3EUse%20Java%20to%20write%20your%20code.&type=0',\r\n    headers: {\r\n        'mode':'cors'\r\n      }).then((res)=>{\r\n      var res = res.json();\r\n        res.then(function(r) {\r\n          var speechURL = r.id;\r\n          console.log('Speech Response: ', r);\r\n          console.log('Speech Data: ', r.data);\r\n          console.log('Speech URL: ', speechURL);\r\n          //setSpeechURL(speechURL);\r\n        });\r\n      }); */\r\n}\r\n\r\nuseEffect(() => {\r\nwindow.showVideo = true;\r\n\r\nsetLang(sessionStorage.getItem('editorLangName'));\r\nsetLangId(LANG_ID_JAVA);\r\nlocalStorage.setItem('language_Id',LANG_ID_JAVA)\r\nif (localStorage.getItem('input') != null) {\r\nconsole.log('localStorage.getItem(input): ', localStorage.getItem('input'));\r\n  setDefaultCode(localStorage.getItem('input'));\r\n  setInput(localStorage.getItem('input'));\r\n}\r\n\r\n\r\ngetQuestionToken();\r\n\r\nstartSessionRecord();\r\n\r\nstartVoiceBot();\r\n\r\n\r\n//setOutput(\"Click the 'Save & Run' button to view your program's output.\");\r\n    if (monaco) {\r\n      console.log(\"here is the monaco instance:\", monaco);\r\n    }\r\n  }, []);\r\n\r\n\r\n\r\n\r\n\r\n\r\nreturn (\r\n  <React.Fragment>\r\n\r\n    <div>\r\n      <div>\r\n        <section class=\"section\" style={{paddingTop: '24px', marginTop: '-6rem'}}>\r\n\r\n          <div class=\"container\">\r\n          <button id=\"speechQuestionTitle\" style={{display: 'none'}} onClick={() => startSpeech()}>Speak</button>\r\n            <div>\r\n              <div id=\"engine_container-9__1Cs0M\" style={{display: isVoiceActive ? 'block' : 'none'}}></div>\r\n            </div>\r\n            <div style={{float: 'right'}}>\r\n              <span><b>Time left</b>&nbsp;&nbsp;</span><Timer seconds={timeRemaining} />\r\n            </div>\r\n            <div>\r\n              <div style={{lineHeight: '28px'}}><b>Live coding question:</b>&nbsp;&nbsp;{questionTitle}&nbsp;&nbsp;{questionDescription}<br/><span></span><br/><span style={{color: '#05976e'}}>*Use {lang} to write your code.</span>\r\n                <span style={{color:'#666',fontSize:'0.8rem'}}>(Please allow <b>camera access</b>. Your video is kept private.)</span>\r\n              </div>\r\n              <br/>\r\n              <div id=\"container\" class=\"engine_editor-container__2uqGs\" style={{width: '100%',height: '350px'}}>\r\n                <Editor\r\n                      defaultLanguage={lang}\r\n                      defaultValue={defaultCode}\r\n                      onChange={handleEditorChange}\r\n                    />\r\n              </div>\r\n              {showOutput && <div id=\"outputContainer\" class=\"engine_editor-container__2uqGs\" style={{width: '100%',height: '129px'}}>\r\n                <textarea disabled value=\"output\" width=\"300px\" height=\"400px\" className=\"engine_engine_output__dBs6o__2T5H9\" value={output}/>\r\n              </div>}\r\n\r\n\r\n\r\n              <div class=\"buttons mb-20\" style={{fontSize: '2rem',display: 'block',margin: '0 auto',left: '0',right: '0',textAlign: 'center', zIndex: '9'}}>\r\n                <div className=\"buttons mb-20\" style={{marginTop: '36px'}}>\r\n                  <span className=\"button is-primary mr-4\" onClick={()=>{run()}}>Save & Run</span>\r\n                  {\r\n                    !isLastQuestion ? <span className=\"button is-primary mr-4 engine_right-btn-span__3aObT\" onClick={()=>{submit()}}>Submit & Load Next &gt;</span>\r\n                    : <><span className=\"button is-primary mr-4 engine_right-btn-span__3aObT\" onClick={()=>{submit()}}>Submit & Finish</span>\r\n                    <div class=\"engine_bubble__3jzVX engine_bubble-left__2mlj5\">This is the final question of your assessment.</div></>\r\n                  }\r\n                </div>\r\n              </div>\r\n\r\n\r\n            </div>\r\n\r\n\r\n          </div>\r\n        </section>\r\n      </div>\r\n      { isLoading && <div class=\"profile_spinner-container__3FkTD\"><span class=\"profile_spinner__1u7yJ\"></span></div> }\r\n      <div class=\"navbar-side is-hidden is-fixed is-top-0 is-left-0 has-background-blur\" style={{zIndex: '50', width:'100%', height: '100%'}}>\r\n        <div class=\"is-absolute\" style={{zIndex: '-1;'}}></div>\r\n        <div class=\"container is-relative\">\r\n          <a class=\"navbar-close is-absolute is-right-0 mt-6 mr-6\" href=\"#\">\r\n            <img src=\"acros-assets/icons/mobile-decline.svg\" alt=\"\"/>\r\n          </a>\r\n        </div>\r\n        <aside class=\"py-6 px-6 pb-8 has-background-white is-flex is-flex-direction-column is-justify-content-space-between\" style={{height: '100%',width: '288px', overflowY: 'auto'}}>\r\n          <div>\r\n            <a class=\"navbar-item title is-size-4 has-text-dark pl-4 mb-5\" href=\"#\">\r\n              <img src=\"acros-assets/logo/logo.png\" width=\"auto\" style={{maxHeight: 'initial', width:'70px'}} alt=\"\"/>\r\n            </a>\r\n          </div>\r\n          <div>\r\n            <div class=\"buttons mb-8\"><a class=\"button is-dark is-outlined is-fullwidth mb-4\" href=\"#\">Log In</a><a class=\"button is-primary is-fullwidth\" href=\"#\">Sign up</a></div>\r\n            <small class=\"has-text-grey-darker ml-6\">2021  Shuffle</small>\r\n          </div>\r\n        </aside>\r\n      </div>\r\n    </div>\r\n\r\n    <section class=\"section py-16\" id=\"cvLive\" style={{paddingTop: '0px !important'}}>\r\n      <div class=\"container\">\r\n        <div class=\"columns is-align-items-center mb-0\">\r\n          <div class=\"column mb-16 mb-0-tablet\" style={{marginTop: '76px'}}>\r\n            <h2 class=\"title mb-6 has-mw-lg\" style={{fontSize: '2.2rem'}}></h2>\r\n            <p class=\"subtitle has-mw-md mb-12\"><br/><br/><br/><br/><br/></p>\r\n\r\n          </div>\r\n          <div class=\"column\">\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n\r\n\r\n\r\n\r\n  </React.Fragment>\r\n);\r\n}\r\nexport default AssessmentEngine;\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}