{"ast":null,"code":"import _classCallCheck from\"/Users/sampath/Documents/code/me/habitrise/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/sampath/Documents/code/me/habitrise/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/sampath/Documents/code/me/habitrise/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/sampath/Documents/code/me/habitrise/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/sampath/Documents/code/me/habitrise/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";var Timer=/*#__PURE__*/function(_React$Component){_inherits(Timer,_React$Component);var _super=_createSuper(Timer);function Timer(props){var _this;_classCallCheck(this,Timer);_this=_super.call(this);_this.state={time:{},seconds:props.seconds,timeElapsed:0,startTime:new Date()};_this.timer=0;_this.startTimer=_this.startTimer.bind(_assertThisInitialized(_this));_this.countDown=_this.countDown.bind(_assertThisInitialized(_this));return _this;}_createClass(Timer,[{key:\"secondsToTime\",value:function secondsToTime(secs){var hours=Math.floor(secs/(60*60));var divisor_for_minutes=secs%(60*60);var minutes=Math.floor(divisor_for_minutes/60);var divisor_for_seconds=divisor_for_minutes%60;var seconds=Math.ceil(divisor_for_seconds);var obj={\"h\":hours,\"m\":minutes,\"s\":seconds};return obj;}},{key:\"componentDidMount\",value:function componentDidMount(){var timeLeftVar=this.secondsToTime(this.state.seconds);this.setState({time:timeLeftVar});this.startTimer();}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(oldProps,newProps){var endTime=new Date();var timeDiff=endTime-this.state.startTime;//in ms\ntimeDiff/=1000;var seconds=Math.round(timeDiff);if(seconds<10){this.setState({seconds:oldProps.seconds});this.startTimer();}}},{key:\"startTimer\",value:function startTimer(){if(this.timer==0&&this.state.seconds>0){this.timer=setInterval(this.countDown,1000);}}},{key:\"countDown\",value:function countDown(){// Remove one second, set state so a re-render happens.\nvar seconds=this.state.seconds-1;this.setState({time:this.secondsToTime(seconds),seconds:seconds});// Check if we're at zero.\nif(seconds==0){clearInterval(this.timer);}}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"span\",{id:\"timeRem\"},\"00: \",this.state.time.m,\": \",this.state.time.s,\"s\");}}]);return Timer;}(React.Component);export{Timer as default};","map":{"version":3,"names":["React","Timer","props","state","time","seconds","timeElapsed","startTime","Date","timer","startTimer","bind","countDown","secs","hours","Math","floor","divisor_for_minutes","minutes","divisor_for_seconds","ceil","obj","timeLeftVar","secondsToTime","setState","oldProps","newProps","endTime","timeDiff","round","setInterval","clearInterval","m","s","Component"],"sources":["/Users/sampath/Documents/code/me/habitrise/src/components/core/timer/index.jsx"],"sourcesContent":["import React from \"react\";\r\n\r\nexport default class Timer extends React.Component {\r\n  constructor(props) {\r\n    super();\r\n    this.state = { time: {}, seconds: props.seconds, timeElapsed: 0, startTime: new Date()  };\r\n    this.timer = 0;\r\n    this.startTimer = this.startTimer.bind(this);\r\n    this.countDown = this.countDown.bind(this);\r\n  }\r\n\r\n  secondsToTime(secs){\r\n    let hours = Math.floor(secs / (60 * 60));\r\n\r\n    let divisor_for_minutes = secs % (60 * 60);\r\n    let minutes = Math.floor(divisor_for_minutes / 60);\r\n\r\n    let divisor_for_seconds = divisor_for_minutes % 60;\r\n    let seconds = Math.ceil(divisor_for_seconds);\r\n\r\n    let obj = {\r\n      \"h\": hours,\r\n      \"m\": minutes,\r\n      \"s\": seconds\r\n    };\r\n    return obj;\r\n  }\r\n\r\n  componentDidMount() {\r\n    let timeLeftVar = this.secondsToTime(this.state.seconds);\r\n    this.setState({ time: timeLeftVar });\r\n    this.startTimer();\r\n  }\r\n\r\n  componentWillReceiveProps(oldProps, newProps) {\r\n    var endTime = new Date();\r\n    var timeDiff = endTime - this.state.startTime; //in ms\r\n    timeDiff /= 1000;\r\n    var seconds = Math.round(timeDiff);\r\n    if (seconds < 10) {\r\n      this.setState({seconds: oldProps.seconds});\r\n      this.startTimer();\r\n    }\r\n  }\r\n\r\n  startTimer() {\r\n    if (this.timer == 0 && this.state.seconds > 0) {\r\n      this.timer = setInterval(this.countDown, 1000);\r\n    }\r\n  }\r\n\r\n  countDown() {\r\n    // Remove one second, set state so a re-render happens.\r\n    let seconds = this.state.seconds - 1;\r\n    this.setState({\r\n      time: this.secondsToTime(seconds),\r\n      seconds: seconds,\r\n    });\r\n\r\n    // Check if we're at zero.\r\n    if (seconds == 0) {\r\n      clearInterval(this.timer);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return(\r\n      <span id=\"timeRem\">\r\n        00: {this.state.time.m}: {this.state.time.s}s\r\n      </span>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"inBAAA,MAAOA,MAAP,KAAkB,OAAlB,C,GAEqBC,M,0GACnB,eAAYC,KAAZ,CAAmB,uCACjB,wBACA,MAAKC,KAAL,CAAa,CAAEC,IAAI,CAAE,EAAR,CAAYC,OAAO,CAAEH,KAAK,CAACG,OAA3B,CAAoCC,WAAW,CAAE,CAAjD,CAAoDC,SAAS,CAAE,GAAIC,KAAJ,EAA/D,CAAb,CACA,MAAKC,KAAL,CAAa,CAAb,CACA,MAAKC,UAAL,CAAkB,MAAKA,UAAL,CAAgBC,IAAhB,+BAAlB,CACA,MAAKC,SAAL,CAAiB,MAAKA,SAAL,CAAeD,IAAf,+BAAjB,CALiB,aAMlB,C,+CAED,uBAAcE,IAAd,CAAmB,CACjB,GAAIC,MAAK,CAAGC,IAAI,CAACC,KAAL,CAAWH,IAAI,EAAI,GAAK,EAAT,CAAf,CAAZ,CAEA,GAAII,oBAAmB,CAAGJ,IAAI,EAAI,GAAK,EAAT,CAA9B,CACA,GAAIK,QAAO,CAAGH,IAAI,CAACC,KAAL,CAAWC,mBAAmB,CAAG,EAAjC,CAAd,CAEA,GAAIE,oBAAmB,CAAGF,mBAAmB,CAAG,EAAhD,CACA,GAAIZ,QAAO,CAAGU,IAAI,CAACK,IAAL,CAAUD,mBAAV,CAAd,CAEA,GAAIE,IAAG,CAAG,CACR,IAAKP,KADG,CAER,IAAKI,OAFG,CAGR,IAAKb,OAHG,CAAV,CAKA,MAAOgB,IAAP,CACD,C,iCAED,4BAAoB,CAClB,GAAIC,YAAW,CAAG,KAAKC,aAAL,CAAmB,KAAKpB,KAAL,CAAWE,OAA9B,CAAlB,CACA,KAAKmB,QAAL,CAAc,CAAEpB,IAAI,CAAEkB,WAAR,CAAd,EACA,KAAKZ,UAAL,GACD,C,yCAED,mCAA0Be,QAA1B,CAAoCC,QAApC,CAA8C,CAC5C,GAAIC,QAAO,CAAG,GAAInB,KAAJ,EAAd,CACA,GAAIoB,SAAQ,CAAGD,OAAO,CAAG,KAAKxB,KAAL,CAAWI,SAApC,CAA+C;AAC/CqB,QAAQ,EAAI,IAAZ,CACA,GAAIvB,QAAO,CAAGU,IAAI,CAACc,KAAL,CAAWD,QAAX,CAAd,CACA,GAAIvB,OAAO,CAAG,EAAd,CAAkB,CAChB,KAAKmB,QAAL,CAAc,CAACnB,OAAO,CAAEoB,QAAQ,CAACpB,OAAnB,CAAd,EACA,KAAKK,UAAL,GACD,CACF,C,0BAED,qBAAa,CACX,GAAI,KAAKD,KAAL,EAAc,CAAd,EAAmB,KAAKN,KAAL,CAAWE,OAAX,CAAqB,CAA5C,CAA+C,CAC7C,KAAKI,KAAL,CAAaqB,WAAW,CAAC,KAAKlB,SAAN,CAAiB,IAAjB,CAAxB,CACD,CACF,C,yBAED,oBAAY,CACV;AACA,GAAIP,QAAO,CAAG,KAAKF,KAAL,CAAWE,OAAX,CAAqB,CAAnC,CACA,KAAKmB,QAAL,CAAc,CACZpB,IAAI,CAAE,KAAKmB,aAAL,CAAmBlB,OAAnB,CADM,CAEZA,OAAO,CAAEA,OAFG,CAAd,EAKA;AACA,GAAIA,OAAO,EAAI,CAAf,CAAkB,CAChB0B,aAAa,CAAC,KAAKtB,KAAN,CAAb,CACD,CACF,C,sBAED,iBAAS,CACP,mBACE,4BAAM,EAAE,CAAC,SAAT,SACO,KAAKN,KAAL,CAAWC,IAAX,CAAgB4B,CADvB,MAC4B,KAAK7B,KAAL,CAAWC,IAAX,CAAgB6B,CAD5C,KADF,CAKD,C,mBArEgCjC,KAAK,CAACkC,S,SAApBjC,K"},"metadata":{},"sourceType":"module"}