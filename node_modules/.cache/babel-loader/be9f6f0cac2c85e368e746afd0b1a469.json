{"ast":null,"code":"import _defineProperty from\"/Users/sampath/Documents/code/me/stint-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/sampath/Documents/code/me/stint-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sampath/Documents/code/me/stint-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/sampath/Documents/code/me/stint-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectDestructuringEmpty from\"/Users/sampath/Documents/code/me/stint-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty\";import React from\"react\";import{useState,useEffect}from\"react\";import Editor,{useMonaco}from\"@monaco-editor/react\";import CONSTANTS from\"../../../constants\";import\"./engine.module.css\";import Timer from'../../core/timer';var AssessmentEngine=function AssessmentEngine(_ref){_objectDestructuringEmpty(_ref);var LANG_ID_JAVA=sessionStorage.getItem('editorLangId');var monaco=useMonaco();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),input=_useState2[0],setInput=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),lang=_useState4[0],setLang=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),questionTitle=_useState6[0],setQuestionTitle=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),questionDescription=_useState8[0],setQuestionDescription=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),langId=_useState10[0],setLangId=_useState10[1];var _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),questionId=_useState12[0],setQuestionId=_useState12[1];var _useState13=useState({}),_useState14=_slicedToArray(_useState13,2),userInput=_useState14[0],setUserInput=_useState14[1];var _useState15=useState(\"Running...\"),_useState16=_slicedToArray(_useState15,2),output=_useState16[0],setOutput=_useState16[1];var _useState17=useState(sessionStorage.getItem('defaultCode')),_useState18=_slicedToArray(_useState17,2),defaultCode=_useState18[0],setDefaultCode=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),showOutput=_useState20[0],setShowOutput=_useState20[1];var _useState21=useState(\"Beginner\"),_useState22=_slicedToArray(_useState21,2),difficultyLevel=_useState22[0],setDifficultyLevel=_useState22[1];var _useState23=useState(0),_useState24=_slicedToArray(_useState23,2),timeRemaining=_useState24[0],setTimeRemaining=_useState24[1];var handleEditorChange=function handleEditorChange(value,event){setInput(value);localStorage.setItem('input',value);setShowOutput(false);};var invokeAPI=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,jsonResponse,message,jsonGetSolution,url,getSolution,_output,error,compilation_error;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setOutput('Creating Submission ...');_context.next=3;return fetch(\"https://judge0-ce.p.rapidapi.com/submissions\",{method:\"POST\",headers:{\"x-rapidapi-host\":\"judge0-ce.p.rapidapi.com\",\"x-rapidapi-key\":\"a1504d0aebmsha2c15d90ecffa8dp117081jsn36e10aaf0ea7\",// Get yours for free at https://rapidapi.com/judge0-official/api/judge0-ce/\n\"content-type\":\"application/json\",accept:\"application/json\"},body:JSON.stringify({source_code:input,stdin:null,language_id:langId})});case 3:response=_context.sent;setOutput(\"Submission Created ...\\n\");_context.next=7;return response.json();case 7:jsonResponse=_context.sent;if(response.ok){_context.next=11;break;}message=\"An error has occured: \".concat(response.status);throw new Error(message);case 11:jsonGetSolution={status:{description:\"Queue\"},stderr:null,compile_output:null};case 12:if(!(jsonGetSolution.status.description!==\"Accepted\"&&jsonGetSolution.stderr==null&&jsonGetSolution.compile_output==null)){_context.next=24;break;}setOutput(\"Creating Submission ... \\nSubmission Created ...\\nChecking Submission Status\\nstatus : \".concat(jsonGetSolution.status.description));if(!jsonResponse.token){_context.next=22;break;}url=\"https://judge0-ce.p.rapidapi.com/submissions/\".concat(jsonResponse.token,\"?base64_encoded=true\");_context.next=18;return fetch(url,{method:\"GET\",headers:{\"x-rapidapi-host\":\"judge0-ce.p.rapidapi.com\",\"x-rapidapi-key\":\"a1504d0aebmsha2c15d90ecffa8dp117081jsn36e10aaf0ea7\",// Get yours for free at https://rapidapi.com/judge0-official/api/judge0-ce/\n\"content-type\":\"application/json\"}});case 18:getSolution=_context.sent;_context.next=21;return getSolution.json();case 21:jsonGetSolution=_context.sent;case 22:_context.next=12;break;case 24:if(jsonGetSolution.stdout){_output=atob(jsonGetSolution.stdout);setOutput('');setOutput(\"Results :\\n\".concat(_output,\"\\nExecution Time : \").concat(jsonGetSolution.time,\" Secs\\nMemory used : \").concat(jsonGetSolution.memory,\" bytes\"));}else if(jsonGetSolution.stderr){error=atob(jsonGetSolution.stderr);setOutput(\"\\n Error :\".concat(error));}else{compilation_error=atob(jsonGetSolution.compile_output);setOutput(\"\\n Error :\".concat(compilation_error));}case 25:case\"end\":return _context.stop();}}},_callee);}));return function invokeAPI(){return _ref2.apply(this,arguments);};}();var run=function run(e){setShowOutput(true);/* window.addEventListener('unhandledrejection', event => { console.log('E: ',event); });\r\n  onunhandledrejection = event => {\r\n    alert('There was an error submitting your code. Pls check your syntax & try again.')\r\n    console.log('invoke API '); //window.location.reload();\r\n  }; */invokeAPI();};var submit=function submit(e){var rawResponse=fetch(CONSTANTS.ENDPOINT.DIRECTUSAUTH,{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({\"email\":\"stint.assess@gmail.com\",\"password\":\"dstintapp1\"})}).then(function(res){var res=res.json();res.then(function(r){console.log('Data: ',r.data);console.log('AccessToken: ',r.data.access_token);var accessToken=r.data.access_token;createSessionRecording(accessToken);});});};var createSessionRecording=function createSessionRecording(accessToken){var recording=JSON.stringify(JSON.parse(localStorage.getItem('recording')).events);recording=recording.replaceAll(\"\\\"\",\"'\");var rawResponse=fetch(CONSTANTS.ENDPOINT.POSTSESSIONRECORDING,{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({\"question_id\":questionId,\"assessment_session_id\":parseInt(sessionStorage.getItem('assessment_session_id'),10),\"events\":recording})}).then(function(res){var res=res.json();res.then(function(r){alert('submitted');console.log('Data: ',r.data);});});};var getTimeLimitInMilliSecs=function getTimeLimitInMilliSecs(timeStr){timeStr=timeStr.replace(' min','');var timeInMins=parseInt(timeStr,10);var timeInMilliSecs=timeInMins*60*1000;return timeInMilliSecs;};var startQuestionTimer=function startQuestionTimer(timeLimit){var timeLimitInMilliSecs=getTimeLimitInMilliSecs(timeLimit);var timeLimitInSecs=timeLimitInMilliSecs/1000;setTimeRemaining(timeLimitInSecs);console.log('timeInMilliSecs: ',timeLimitInMilliSecs);setTimeout(function(){console.log('load next question');},timeLimitInMilliSecs);};var getQuestion=function getQuestion(accessToken,skillId,competencyId){console.log('calling getQuestion...');var rawResponse=fetch(CONSTANTS.ENDPOINT.GETQUESTION+accessToken+'&filter={ \"difficulty_level\": { \"_eq\": \"'+difficultyLevel+'\" }, \"skill_id\": { \"_eq\": '+skillId+' }, \"competency\": { \"_eq\": '+competencyId+' }}').then(function(res){var res=res.json();res.then(function(r){var question=r.data;var title=question[0].title;var description=question[0].description;var codeSnippet=question[0].code_snippet;var timeLimit=question[0].time_limit;setQuestionId(question[0].id);console.log('codeSnippet: ',codeSnippet);console.log('timeLimit',timeLimit);startQuestionTimer(timeLimit);setInput(codeSnippet);setQuestionTitle(title);setQuestionDescription(description);});});};var getQuestionToken=function getQuestionToken(){var rawResponse=fetch(CONSTANTS.ENDPOINT.DIRECTUSAUTH,{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({\"email\":\"stint.assess@gmail.com\",\"password\":\"dstintapp1\"})}).then(function(res){var res=res.json();res.then(function(r){console.log('Data: ',r.data);console.log('AccessToken1: ',r.data.access_token);var accessToken=r.data.access_token;var difficultyLevel=\"Beginner\";//read from session storage\nvar skillId=sessionStorage.getItem(\"primarySkill\");//read from session storage\nvar competencyId=sessionStorage.getItem(\"competencyId\");//read from session storage\ngetQuestion(accessToken,skillId,competencyId);});});};var events=[];var startSessionRecord=function startSessionRecord(){if(typeof window.rrweb!=\"undefined\"){var save=function save(){var body=JSON.stringify({events:events});localStorage.setItem('recording',body);console.log('--events--',body);/* new window.rrwebPlayer({\r\n          target: document.getElementById('container'), // customizable root element\r\n          props: {\r\n            events\r\n          },\r\n        }); */};window.rrweb.record({emit:function emit(event){// push event into the events array\nevents.push(event);}});setInterval(save,15*1000);}};useEffect(function(){//window.showVideo = true;\nsetLang(sessionStorage.getItem('editorLangName'));setLangId(LANG_ID_JAVA);localStorage.setItem('language_Id',LANG_ID_JAVA);if(localStorage.getItem('input')!=null){console.log('localStorage.getItem(input): ',localStorage.getItem('input'));setDefaultCode(localStorage.getItem('input'));setInput(localStorage.getItem('input'));}getQuestionToken();startSessionRecord();//setOutput(\"Click the 'Save & Run' button to view your program's output.\");\nif(monaco){console.log(\"here is the monaco instance:\",monaco);}},[monaco]);return React.createElement(React.Fragment,null,React.createElement(\"div\",null,React.createElement(\"div\",null,React.createElement(\"section\",{class:\"section\",style:{paddingTop:'24px',marginTop:'-6rem'}},React.createElement(\"div\",{class:\"container\"},React.createElement(\"div\",{style:{float:'right'}},React.createElement(\"span\",null,React.createElement(\"b\",null,\"Time left\"),\"\\xA0\\xA0\"),React.createElement(Timer,{seconds:timeRemaining})),React.createElement(\"div\",null,React.createElement(\"div\",{style:{lineHeight:'28px'}},React.createElement(\"b\",null,\"Live coding question:\"),\"\\xA0\\xA0\",questionTitle,\"\\xA0\\xA0\",questionDescription,React.createElement(\"br\",null),React.createElement(\"span\",null),React.createElement(\"br\",null),React.createElement(\"span\",{style:{color:'#05976e'}},\"*Use \",lang,\" to write your code.\"),React.createElement(\"span\",{style:{color:'#666',fontSize:'0.8rem'}},\"(Please allow \",React.createElement(\"b\",null,\"camera access\"),\". Your video is kept private.)\")),React.createElement(\"br\",null),React.createElement(\"div\",{id:\"container\",class:\"engine_editor-container__2uqGs\",style:{width:'100%',height:'350px'}},React.createElement(Editor,{defaultLanguage:lang,defaultValue:defaultCode,onChange:handleEditorChange})),showOutput&&React.createElement(\"div\",{id:\"outputContainer\",class:\"engine_editor-container__2uqGs\",style:{width:'100%',height:'129px'}},React.createElement(\"textarea\",_defineProperty({disabled:true,value:\"output\",width:\"300px\",height:\"400px\",className:\"engine_engine_output__dBs6o__2T5H9\"},\"value\",output))),React.createElement(\"div\",{class:\"buttons mb-20\",style:{fontSize:'2rem',display:'block',margin:'0 auto',left:'0',right:'0',textAlign:'center',zIndex:'9'}},React.createElement(\"div\",{className:\"buttons mb-20\",style:{marginTop:'36px'}},React.createElement(\"span\",{className:\"button is-primary mr-4\",onClick:function onClick(){run();}},\"Save & Run\"),React.createElement(\"span\",{className:\"button is-primary mr-4 engine_right-btn-span__3aObT\",onClick:function onClick(){submit();}},\"Submit & Load Next >\"))))))),React.createElement(\"div\",{class:\"navbar-side is-hidden is-fixed is-top-0 is-left-0 has-background-blur\",style:{zIndex:'50',width:'100%',height:'100%'}},React.createElement(\"div\",{class:\"is-absolute\",style:{zIndex:'-1;'}}),React.createElement(\"div\",{class:\"container is-relative\"},React.createElement(\"a\",{class:\"navbar-close is-absolute is-right-0 mt-6 mr-6\",href:\"#\"},React.createElement(\"img\",{src:\"acros-assets/icons/mobile-decline.svg\",alt:\"\"}))),React.createElement(\"aside\",{class:\"py-6 px-6 pb-8 has-background-white is-flex is-flex-direction-column is-justify-content-space-between\",style:{height:'100%',width:'288px',overflowY:'auto'}},React.createElement(\"div\",null,React.createElement(\"a\",{class:\"navbar-item title is-size-4 has-text-dark pl-4 mb-5\",href:\"#\"},React.createElement(\"img\",{src:\"acros-assets/logo/logo.png\",width:\"auto\",style:{maxHeight:'initial',width:'70px'},alt:\"\"}))),React.createElement(\"div\",null,React.createElement(\"div\",{class:\"buttons mb-8\"},React.createElement(\"a\",{class:\"button is-dark is-outlined is-fullwidth mb-4\",href:\"#\"},\"Log In\"),React.createElement(\"a\",{class:\"button is-primary is-fullwidth\",href:\"#\"},\"Sign up\")),React.createElement(\"small\",{class:\"has-text-grey-darker ml-6\"},\"2021 \\xA9 Shuffle\"))))),React.createElement(\"section\",{class:\"section py-16\",id:\"cvLive\",style:{paddingTop:'0px !important'}},React.createElement(\"div\",{class:\"container\"},React.createElement(\"div\",{class:\"columns is-align-items-center mb-0\"},React.createElement(\"div\",{class:\"column mb-16 mb-0-tablet\",style:{marginTop:'76px'}},React.createElement(\"h2\",{class:\"title mb-6 has-mw-lg\",style:{fontSize:'2.2rem'}}),React.createElement(\"p\",{class:\"subtitle has-mw-md mb-12\"},React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null))),React.createElement(\"div\",{class:\"column\"})))));};export default AssessmentEngine;","map":{"version":3,"sources":["/Users/sampath/Documents/code/me/stint-web/src/components/assessment/engine/index.jsx"],"names":["React","useState","useEffect","Editor","useMonaco","CONSTANTS","Timer","AssessmentEngine","LANG_ID_JAVA","sessionStorage","getItem","monaco","input","setInput","lang","setLang","questionTitle","setQuestionTitle","questionDescription","setQuestionDescription","langId","setLangId","questionId","setQuestionId","userInput","setUserInput","output","setOutput","defaultCode","setDefaultCode","showOutput","setShowOutput","difficultyLevel","setDifficultyLevel","timeRemaining","setTimeRemaining","handleEditorChange","value","event","localStorage","setItem","invokeAPI","fetch","method","headers","accept","body","JSON","stringify","source_code","stdin","language_id","response","json","jsonResponse","ok","message","status","Error","jsonGetSolution","description","stderr","compile_output","token","url","getSolution","stdout","atob","time","memory","error","compilation_error","run","e","submit","rawResponse","ENDPOINT","DIRECTUSAUTH","then","res","r","console","log","data","access_token","accessToken","createSessionRecording","recording","parse","events","replaceAll","POSTSESSIONRECORDING","parseInt","alert","getTimeLimitInMilliSecs","timeStr","replace","timeInMins","timeInMilliSecs","startQuestionTimer","timeLimit","timeLimitInMilliSecs","timeLimitInSecs","setTimeout","getQuestion","skillId","competencyId","GETQUESTION","question","title","codeSnippet","code_snippet","time_limit","id","getQuestionToken","startSessionRecord","window","rrweb","save","record","emit","push","setInterval","paddingTop","marginTop","float","lineHeight","color","fontSize","width","height","display","margin","left","right","textAlign","zIndex","overflowY","maxHeight"],"mappings":"0zBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,QAAR,CAAkBC,SAAlB,KAAkC,OAAlC,CACA,MAAOC,CAAAA,MAAP,EAAiBC,SAAjB,KAAkC,sBAAlC,CACA,MAAOC,CAAAA,SAAP,KAAsB,oBAAtB,CACA,MAAO,qBAAP,CACA,MAAOC,CAAAA,KAAP,KAAkB,kBAAlB,CAEA,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,MAAQ,iCAEjC,GAAMC,CAAAA,YAAY,CAAGC,cAAc,CAACC,OAAf,CAAuB,cAAvB,CAArB,CAEA,GAAMC,CAAAA,MAAM,CAAGP,SAAS,EAAxB,CAJiC,cAKPH,QAAQ,CAAC,EAAD,CALD,wCAK1BW,KAL0B,eAKnBC,QALmB,8BAMTZ,QAAQ,CAAC,EAAD,CANC,yCAM1Ba,IAN0B,eAMpBC,OANoB,8BAOSd,QAAQ,CAAC,EAAD,CAPjB,yCAO1Be,aAP0B,eAOXC,gBAPW,8BAQqBhB,QAAQ,CAAC,EAAD,CAR7B,yCAQ1BiB,mBAR0B,eAQLC,sBARK,8BASLlB,QAAQ,CAAC,CAAD,CATH,0CAS1BmB,MAT0B,gBASlBC,SATkB,gCAUGpB,QAAQ,CAAC,CAAD,CAVX,2CAU1BqB,UAV0B,gBAUdC,aAVc,gCAWCtB,QAAQ,CAAC,EAAD,CAXT,2CAW1BuB,SAX0B,gBAWfC,YAXe,gCAYLxB,QAAQ,CAAC,YAAD,CAZH,2CAY1ByB,MAZ0B,gBAYlBC,SAZkB,gCAaK1B,QAAQ,CAACQ,cAAc,CAACC,OAAf,CAAuB,aAAvB,CAAD,CAbb,2CAa1BkB,WAb0B,gBAabC,cAba,gCAcG5B,QAAQ,CAAC,KAAD,CAdX,2CAc1B6B,UAd0B,gBAcdC,aAdc,gCAea9B,QAAQ,CAAC,UAAD,CAfrB,2CAe1B+B,eAf0B,gBAeTC,kBAfS,gCAgBShC,QAAQ,CAAC,CAAD,CAhBjB,2CAgB1BiC,aAhB0B,gBAgBXC,gBAhBW,gBAkBjC,GAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,KAAD,CAAQC,KAAR,CAAkB,CACzCzB,QAAQ,CAACwB,KAAD,CAAR,CACAE,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BH,KAA9B,EACAN,aAAa,CAAC,KAAD,CAAb,CACH,CAJD,CAMA,GAAMU,CAAAA,SAAS,2FAAG,qOACdd,SAAS,CAAC,yBAAD,CAAT,CADc,sBAESe,CAAAA,KAAK,CAC1B,8CAD0B,CAE1B,CACEC,MAAM,CAAE,MADV,CAEEC,OAAO,CAAE,CACP,kBAAmB,0BADZ,CAEP,iBAAkB,oDAFX,CAEiE;AACxE,eAAgB,kBAHT,CAIPC,MAAM,CAAE,kBAJD,CAFX,CAQEC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACnBC,WAAW,CAAErC,KADM,CAEnBsC,KAAK,CAAE,IAFY,CAGnBC,WAAW,CAAE/B,MAHM,CAAf,CARR,CAF0B,CAFd,QAERgC,QAFQ,eAmBdzB,SAAS,CAAC,0BAAD,CAAT,CAnBc,sBAoBayB,CAAAA,QAAQ,CAACC,IAAT,EApBb,QAoBRC,YApBQ,kBAqBTF,QAAQ,CAACG,EArBA,0BAsBIC,OAtBJ,iCAsBuCJ,QAAQ,CAACK,MAtBhD,OAuBI,IAAIC,CAAAA,KAAJ,CAAUF,OAAV,CAvBJ,SA0BVG,eA1BU,CA0BQ,CACpBF,MAAM,CAAE,CAAEG,WAAW,CAAE,OAAf,CADY,CAEpBC,MAAM,CAAE,IAFY,CAGpBC,cAAc,CAAE,IAHI,CA1BR,cAiCZH,eAAe,CAACF,MAAhB,CAAuBG,WAAvB,GAAuC,UAAvC,EACAD,eAAe,CAACE,MAAhB,EAA0B,IAD1B,EAEAF,eAAe,CAACG,cAAhB,EAAkC,IAnCtB,2BAqCZnC,SAAS,kGAA2FgC,eAAe,CAACF,MAAhB,CAAuBG,WAAlH,EAAT,CArCY,IAsCRN,YAAY,CAACS,KAtCL,0BAuCNC,GAvCM,wDAuCgDV,YAAY,CAACS,KAvC7D,gDAyCgBrB,CAAAA,KAAK,CAACsB,GAAD,CAAM,CACnCrB,MAAM,CAAE,KAD2B,CAEnCC,OAAO,CAAE,CACP,kBAAmB,0BADZ,CAEP,iBAAkB,oDAFX,CAEiE;AACxE,eAAgB,kBAHT,CAF0B,CAAN,CAzCrB,SAyCJqB,WAzCI,sCAkDcA,CAAAA,WAAW,CAACZ,IAAZ,EAlDd,SAkDVM,eAlDU,sDAqDd,GAAIA,eAAe,CAACO,MAApB,CAA4B,CACpBxC,OADoB,CACXyC,IAAI,CAACR,eAAe,CAACO,MAAjB,CADO,CAG1BvC,SAAS,CAAC,EAAD,CAAT,CACAA,SAAS,sBAAeD,OAAf,+BAA2CiC,eAAe,CAACS,IAA3D,iCAAuFT,eAAe,CAACU,MAAvG,WAAT,CACD,CALD,IAKO,IAAIV,eAAe,CAACE,MAApB,CAA4B,CAC3BS,KAD2B,CACnBH,IAAI,CAACR,eAAe,CAACE,MAAjB,CADe,CAGjClC,SAAS,qBAAc2C,KAAd,EAAT,CACD,CAJM,IAIA,CACCC,iBADD,CACqBJ,IAAI,CAACR,eAAe,CAACG,cAAjB,CADzB,CAGLnC,SAAS,qBAAc4C,iBAAd,EAAT,CACD,CAlEa,uDAAH,kBAAT9B,CAAAA,SAAS,2CAAf,CAqEA,GAAM+B,CAAAA,GAAG,CAAG,QAANA,CAAAA,GAAM,CAACC,CAAD,CAAO,CACjB1C,aAAa,CAAC,IAAD,CAAb,CACA;;;;OAMAU,SAAS,GACV,CATD,CAWA,GAAMiC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAACD,CAAD,CAAO,CACpB,GAAME,CAAAA,WAAW,CAAGjC,KAAK,CAACrC,SAAS,CAACuE,QAAV,CAAmBC,YAApB,CAAkC,CACnDlC,MAAM,CAAE,MAD2C,CAEnDC,OAAO,CAAE,CACP,SAAU,kBADH,CAEP,eAAgB,kBAFT,CAF0C,CAMnDE,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACtB,QAAS,wBADa,CAEtB,WAAY,YAFU,CAAf,CAN6C,CAAlC,CAAL,CASV8B,IATU,CASL,SAACC,GAAD,CAAO,CACf,GAAIA,CAAAA,GAAG,CAAGA,GAAG,CAAC1B,IAAJ,EAAV,CACA0B,GAAG,CAACD,IAAJ,CAAS,SAASE,CAAT,CAAY,CACnBC,OAAO,CAACC,GAAR,CAAY,QAAZ,CAAsBF,CAAC,CAACG,IAAxB,EACAF,OAAO,CAACC,GAAR,CAAY,eAAZ,CAA6BF,CAAC,CAACG,IAAF,CAAOC,YAApC,EACI,GAAIC,CAAAA,WAAW,CAAGL,CAAC,CAACG,IAAF,CAAOC,YAAzB,CACAE,sBAAsB,CAACD,WAAD,CAAtB,CACL,CALD,EAMD,CAjBc,CAApB,CAkBD,CAnBD,CAqBA,GAAMC,CAAAA,sBAAsB,CAAG,QAAzBA,CAAAA,sBAAyB,CAACD,WAAD,CAAiB,CACzC,GAAIE,CAAAA,SAAS,CAAGxC,IAAI,CAACC,SAAL,CAAeD,IAAI,CAACyC,KAAL,CAAWjD,YAAY,CAAC7B,OAAb,CAAqB,WAArB,CAAX,EAA8C+E,MAA7D,CAAhB,CACAF,SAAS,CAAGA,SAAS,CAACG,UAAV,CAAqB,IAArB,CAA2B,GAA3B,CAAZ,CACA,GAAMf,CAAAA,WAAW,CAAGjC,KAAK,CAACrC,SAAS,CAACuE,QAAV,CAAmBe,oBAApB,CAA0C,CAC/DhD,MAAM,CAAE,MADuD,CAE/DC,OAAO,CAAE,CACP,SAAU,kBADH,CAEP,eAAgB,kBAFT,CAFsD,CAM/DE,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACtB,cAAe1B,UADO,CAEtB,wBAAyBsE,QAAQ,CAACnF,cAAc,CAACC,OAAf,CAAuB,uBAAvB,CAAD,CAAiD,EAAjD,CAFX,CAGtB,SAAS6E,SAHa,CAAf,CANyD,CAA1C,CAAL,CAUdT,IAVc,CAUT,SAACC,GAAD,CAAO,CACf,GAAIA,CAAAA,GAAG,CAAGA,GAAG,CAAC1B,IAAJ,EAAV,CACA0B,GAAG,CAACD,IAAJ,CAAS,SAASE,CAAT,CAAY,CACnBa,KAAK,CAAC,WAAD,CAAL,CACAZ,OAAO,CAACC,GAAR,CAAY,QAAZ,CAAsBF,CAAC,CAACG,IAAxB,EACD,CAHD,EAIF,CAhBmB,CAApB,CAiBF,CApBL,CAsBA,GAAMW,CAAAA,uBAAuB,CAAG,QAA1BA,CAAAA,uBAA0B,CAACC,OAAD,CAAa,CAC3CA,OAAO,CAAGA,OAAO,CAACC,OAAR,CAAgB,MAAhB,CAAuB,EAAvB,CAAV,CACA,GAAIC,CAAAA,UAAU,CAAGL,QAAQ,CAACG,OAAD,CAAU,EAAV,CAAzB,CACA,GAAIG,CAAAA,eAAe,CAAGD,UAAU,CAAG,EAAb,CAAkB,IAAxC,CACA,MAAOC,CAAAA,eAAP,CACD,CALD,CAOA,GAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,SAAD,CAAe,CACxC,GAAIC,CAAAA,oBAAoB,CAAGP,uBAAuB,CAACM,SAAD,CAAlD,CACA,GAAIE,CAAAA,eAAe,CAAGD,oBAAoB,CAAC,IAA3C,CACAlE,gBAAgB,CAACmE,eAAD,CAAhB,CACArB,OAAO,CAACC,GAAR,CAAY,mBAAZ,CAAiCmB,oBAAjC,EACAE,UAAU,CAAC,UAAW,CACpBtB,OAAO,CAACC,GAAR,CAAY,oBAAZ,EACD,CAFS,CAEPmB,oBAFO,CAAV,CAGD,CARD,CAUA,GAAMG,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACnB,WAAD,CAAcoB,OAAd,CAAuBC,YAAvB,CAAwC,CACrDzB,OAAO,CAACC,GAAR,CAAY,wBAAZ,EACA,GAAMP,CAAAA,WAAW,CAAGjC,KAAK,CAACrC,SAAS,CAACuE,QAAV,CAAmB+B,WAAnB,CAAiCtB,WAAjC,CAA+C,0CAA/C,CAA0FrD,eAA1F,CAA0G,4BAA1G,CAAuIyE,OAAvI,CAA+I,6BAA/I,CAA6KC,YAA7K,CAA0L,KAA3L,CAAL,CAAuM5B,IAAvM,CAA4M,SAACC,GAAD,CAAO,CACtO,GAAIA,CAAAA,GAAG,CAAGA,GAAG,CAAC1B,IAAJ,EAAV,CACE0B,GAAG,CAACD,IAAJ,CAAS,SAASE,CAAT,CAAY,CACnB,GAAI4B,CAAAA,QAAQ,CAAG5B,CAAC,CAACG,IAAjB,CACA,GAAI0B,CAAAA,KAAK,CAAGD,QAAQ,CAAC,CAAD,CAAR,CAAYC,KAAxB,CACA,GAAIjD,CAAAA,WAAW,CAAGgD,QAAQ,CAAC,CAAD,CAAR,CAAYhD,WAA9B,CACA,GAAIkD,CAAAA,WAAW,CAAGF,QAAQ,CAAC,CAAD,CAAR,CAAYG,YAA9B,CACA,GAAIX,CAAAA,SAAS,CAAGQ,QAAQ,CAAC,CAAD,CAAR,CAAYI,UAA5B,CACAzF,aAAa,CAACqF,QAAQ,CAAC,CAAD,CAAR,CAAYK,EAAb,CAAb,CACAhC,OAAO,CAACC,GAAR,CAAY,eAAZ,CAA6B4B,WAA7B,EACA7B,OAAO,CAACC,GAAR,CAAY,WAAZ,CAAyBkB,SAAzB,EACAD,kBAAkB,CAACC,SAAD,CAAlB,CACAvF,QAAQ,CAACiG,WAAD,CAAR,CACA7F,gBAAgB,CAAC4F,KAAD,CAAhB,CACA1F,sBAAsB,CAACyC,WAAD,CAAtB,CACD,CAbD,EAcD,CAhBkB,CAApB,CAiBF,CAnBL,CAqBA,GAAMsD,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,EAAM,CAC7B,GAAMvC,CAAAA,WAAW,CAAGjC,KAAK,CAACrC,SAAS,CAACuE,QAAV,CAAmBC,YAApB,CAAkC,CAClDlC,MAAM,CAAE,MAD0C,CAElDC,OAAO,CAAE,CACP,SAAU,kBADH,CAEP,eAAgB,kBAFT,CAFyC,CAMlDE,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACtB,QAAS,wBADa,CAEtB,WAAY,YAFU,CAAf,CAN4C,CAAlC,CAAL,CAST8B,IATS,CASJ,SAACC,GAAD,CAAO,CACf,GAAIA,CAAAA,GAAG,CAAGA,GAAG,CAAC1B,IAAJ,EAAV,CACA0B,GAAG,CAACD,IAAJ,CAAS,SAASE,CAAT,CAAY,CACnBC,OAAO,CAACC,GAAR,CAAY,QAAZ,CAAsBF,CAAC,CAACG,IAAxB,EACAF,OAAO,CAACC,GAAR,CAAY,gBAAZ,CAA8BF,CAAC,CAACG,IAAF,CAAOC,YAArC,EACI,GAAIC,CAAAA,WAAW,CAAGL,CAAC,CAACG,IAAF,CAAOC,YAAzB,CACA,GAAIpD,CAAAA,eAAe,CAAG,UAAtB,CAAkC;AAClC,GAAIyE,CAAAA,OAAO,CAAGhG,cAAc,CAACC,OAAf,CAAuB,cAAvB,CAAd,CAAsD;AACtD,GAAIgG,CAAAA,YAAY,CAAGjG,cAAc,CAACC,OAAf,CAAuB,cAAvB,CAAnB,CAA2D;AAC3D8F,WAAW,CAACnB,WAAD,CAAcoB,OAAd,CAAuBC,YAAvB,CAAX,CAEL,CATD,EAUD,CArBa,CAApB,CAsBD,CAvBD,CAwBA,GAAIjB,CAAAA,MAAM,CAAG,EAAb,CACA,GAAM0B,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,EAAM,CAE/B,GAAG,MAAOC,CAAAA,MAAM,CAACC,KAAd,EAAuB,WAA1B,CAAuC,IAO1BC,CAAAA,IAP0B,CAOnC,QAASA,CAAAA,IAAT,EAAgB,CACd,GAAMxE,CAAAA,IAAI,CAAGC,IAAI,CAACC,SAAL,CAAe,CAAEyC,MAAM,CAANA,MAAF,CAAf,CAAb,CACAlD,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAkCM,IAAlC,EACAmC,OAAO,CAACC,GAAR,CAAY,YAAZ,CAA0BpC,IAA1B,EACA;;;;;cAMD,CAjBkC,CACrCsE,MAAM,CAACC,KAAP,CAAaE,MAAb,CAAoB,CAChBC,IADgB,eACXlF,KADW,CACJ,CACV;AACAmD,MAAM,CAACgC,IAAP,CAAYnF,KAAZ,EACD,CAJe,CAApB,EAiBEoF,WAAW,CAACJ,IAAD,CAAO,GAAK,IAAZ,CAAX,CACH,CACF,CAtBD,CAwBApH,SAAS,CAAC,UAAM,CAChB;AAEAa,OAAO,CAACN,cAAc,CAACC,OAAf,CAAuB,gBAAvB,CAAD,CAAP,CACAW,SAAS,CAACb,YAAD,CAAT,CACA+B,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAmChC,YAAnC,EACA,GAAI+B,YAAY,CAAC7B,OAAb,CAAqB,OAArB,GAAiC,IAArC,CAA2C,CAC3CuE,OAAO,CAACC,GAAR,CAAY,+BAAZ,CAA6C3C,YAAY,CAAC7B,OAAb,CAAqB,OAArB,CAA7C,EACEmB,cAAc,CAACU,YAAY,CAAC7B,OAAb,CAAqB,OAArB,CAAD,CAAd,CACAG,QAAQ,CAAC0B,YAAY,CAAC7B,OAAb,CAAqB,OAArB,CAAD,CAAR,CACD,CAGDwG,gBAAgB,GAEhBC,kBAAkB,GAGlB;AACI,GAAIxG,MAAJ,CAAY,CACVsE,OAAO,CAACC,GAAR,CAAY,8BAAZ,CAA4CvE,MAA5C,EACD,CACF,CAtBM,CAsBJ,CAACA,MAAD,CAtBI,CAAT,CAwBA,MACE,qBAAC,KAAD,CAAO,QAAP,MAEE,+BACE,+BACE,+BAAS,KAAK,CAAC,SAAf,CAAyB,KAAK,CAAE,CAACgH,UAAU,CAAE,MAAb,CAAqBC,SAAS,CAAE,OAAhC,CAAhC,EACE,2BAAK,KAAK,CAAC,WAAX,EACE,2BAAK,KAAK,CAAE,CAACC,KAAK,CAAE,OAAR,CAAZ,EACE,gCAAM,yCAAN,YADF,CAC2C,oBAAC,KAAD,EAAO,OAAO,CAAE3F,aAAhB,EAD3C,CADF,CAIE,+BACE,2BAAK,KAAK,CAAE,CAAC4F,UAAU,CAAE,MAAb,CAAZ,EAAkC,qDAAlC,YAA2E9G,aAA3E,YAAsGE,mBAAtG,CAA0H,8BAA1H,CAA+H,gCAA/H,CAA4I,8BAA5I,CAAiJ,4BAAM,KAAK,CAAE,CAAC6G,KAAK,CAAE,SAAR,CAAb,UAAuCjH,IAAvC,wBAAjJ,CACE,4BAAM,KAAK,CAAE,CAACiH,KAAK,CAAC,MAAP,CAAcC,QAAQ,CAAC,QAAvB,CAAb,mBAA6D,6CAA7D,kCADF,CADF,CAIE,8BAJF,CAKE,2BAAK,EAAE,CAAC,WAAR,CAAoB,KAAK,CAAC,gCAA1B,CAA2D,KAAK,CAAE,CAACC,KAAK,CAAE,MAAR,CAAeC,MAAM,CAAE,OAAvB,CAAlE,EACE,oBAAC,MAAD,EACM,eAAe,CAAEpH,IADvB,CAEM,YAAY,CAAEc,WAFpB,CAGM,QAAQ,CAAEQ,kBAHhB,EADF,CALF,CAYGN,UAAU,EAAI,2BAAK,EAAE,CAAC,iBAAR,CAA0B,KAAK,CAAC,gCAAhC,CAAiE,KAAK,CAAE,CAACmG,KAAK,CAAE,MAAR,CAAeC,MAAM,CAAE,OAAvB,CAAxE,EACb,gDAAU,QAAQ,KAAlB,CAAmB,KAAK,CAAC,QAAzB,CAAkC,KAAK,CAAC,OAAxC,CAAgD,MAAM,CAAC,OAAvD,CAA+D,SAAS,CAAC,oCAAzE,UAAqHxG,MAArH,EADa,CAZjB,CAkBE,2BAAK,KAAK,CAAC,eAAX,CAA2B,KAAK,CAAE,CAACsG,QAAQ,CAAE,MAAX,CAAkBG,OAAO,CAAE,OAA3B,CAAmCC,MAAM,CAAE,QAA3C,CAAoDC,IAAI,CAAE,GAA1D,CAA8DC,KAAK,CAAE,GAArE,CAAyEC,SAAS,CAAE,QAApF,CAA8FC,MAAM,CAAE,GAAtG,CAAlC,EACE,2BAAK,SAAS,CAAC,eAAf,CAA+B,KAAK,CAAE,CAACZ,SAAS,CAAE,MAAZ,CAAtC,EACE,4BAAM,SAAS,CAAC,wBAAhB,CAAyC,OAAO,CAAE,kBAAI,CAACpD,GAAG,GAAG,CAA7D,eADF,CAEE,4BAAM,SAAS,CAAC,qDAAhB,CAAsE,OAAO,CAAE,kBAAI,CAACE,MAAM,GAAG,CAA7F,yBAFF,CADF,CAlBF,CAJF,CADF,CADF,CADF,CAuCE,2BAAK,KAAK,CAAC,uEAAX,CAAmF,KAAK,CAAE,CAAC8D,MAAM,CAAE,IAAT,CAAeP,KAAK,CAAC,MAArB,CAA6BC,MAAM,CAAE,MAArC,CAA1F,EACE,2BAAK,KAAK,CAAC,aAAX,CAAyB,KAAK,CAAE,CAACM,MAAM,CAAE,KAAT,CAAhC,EADF,CAEE,2BAAK,KAAK,CAAC,uBAAX,EACE,yBAAG,KAAK,CAAC,+CAAT,CAAyD,IAAI,CAAC,GAA9D,EACE,2BAAK,GAAG,CAAC,uCAAT,CAAiD,GAAG,CAAC,EAArD,EADF,CADF,CAFF,CAOE,6BAAO,KAAK,CAAC,uGAAb,CAAqH,KAAK,CAAE,CAACN,MAAM,CAAE,MAAT,CAAgBD,KAAK,CAAE,OAAvB,CAAgCQ,SAAS,CAAE,MAA3C,CAA5H,EACE,+BACE,yBAAG,KAAK,CAAC,qDAAT,CAA+D,IAAI,CAAC,GAApE,EACE,2BAAK,GAAG,CAAC,4BAAT,CAAsC,KAAK,CAAC,MAA5C,CAAmD,KAAK,CAAE,CAACC,SAAS,CAAE,SAAZ,CAAuBT,KAAK,CAAC,MAA7B,CAA1D,CAAgG,GAAG,CAAC,EAApG,EADF,CADF,CADF,CAME,+BACE,2BAAK,KAAK,CAAC,cAAX,EAA0B,yBAAG,KAAK,CAAC,8CAAT,CAAwD,IAAI,CAAC,GAA7D,WAA1B,CAAqG,yBAAG,KAAK,CAAC,gCAAT,CAA0C,IAAI,CAAC,GAA/C,YAArG,CADF,CAEE,6BAAO,KAAK,CAAC,2BAAb,sBAFF,CANF,CAPF,CAvCF,CAFF,CA8DE,+BAAS,KAAK,CAAC,eAAf,CAA+B,EAAE,CAAC,QAAlC,CAA2C,KAAK,CAAE,CAACN,UAAU,CAAE,gBAAb,CAAlD,EACE,2BAAK,KAAK,CAAC,WAAX,EACE,2BAAK,KAAK,CAAC,oCAAX,EACE,2BAAK,KAAK,CAAC,0BAAX,CAAsC,KAAK,CAAE,CAACC,SAAS,CAAE,MAAZ,CAA7C,EACE,0BAAI,KAAK,CAAC,sBAAV,CAAiC,KAAK,CAAE,CAACI,QAAQ,CAAE,QAAX,CAAxC,EADF,CAEE,yBAAG,KAAK,CAAC,0BAAT,EAAoC,8BAApC,CAAyC,8BAAzC,CAA8C,8BAA9C,CAAmD,8BAAnD,CAAwD,8BAAxD,CAFF,CADF,CAME,2BAAK,KAAK,CAAC,QAAX,EANF,CADF,CADF,CA9DF,CADF,CAkFC,CApVD,CAqVA,cAAezH,CAAAA,gBAAf","sourcesContent":["import React from \"react\";\r\nimport {useState, useEffect} from \"react\";\r\nimport Editor, { useMonaco } from \"@monaco-editor/react\";\r\nimport CONSTANTS from \"../../../constants\";\r\nimport \"./engine.module.css\";\r\nimport Timer from '../../core/timer';\r\n\r\nconst AssessmentEngine = ({}) => {\r\n\r\nconst LANG_ID_JAVA = sessionStorage.getItem('editorLangId');\r\n\r\nconst monaco = useMonaco();\r\nconst [input, setInput] = useState({});\r\nconst [lang, setLang] = useState(\"\");\r\nconst [questionTitle, setQuestionTitle] = useState(\"\");\r\nconst [questionDescription, setQuestionDescription] = useState(\"\");\r\nconst [langId, setLangId] = useState(0);\r\nconst [questionId, setQuestionId] = useState(0);\r\nconst [userInput, setUserInput] = useState({});\r\nconst [output, setOutput] = useState(\"Running...\");\r\nconst [defaultCode, setDefaultCode] = useState(sessionStorage.getItem('defaultCode'));\r\nconst [showOutput, setShowOutput] = useState(false);\r\nconst [difficultyLevel, setDifficultyLevel] = useState(\"Beginner\");\r\nconst [timeRemaining, setTimeRemaining] = useState(0);\r\n\r\nconst handleEditorChange = (value, event) => {\r\n    setInput(value);\r\n    localStorage.setItem('input', value);\r\n    setShowOutput(false);\r\n};\r\n\r\nconst invokeAPI = async () => {\r\n    setOutput('Creating Submission ...');\r\n    const response = await fetch(\r\n      \"https://judge0-ce.p.rapidapi.com/submissions\",\r\n      {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"x-rapidapi-host\": \"judge0-ce.p.rapidapi.com\",\r\n          \"x-rapidapi-key\": \"a1504d0aebmsha2c15d90ecffa8dp117081jsn36e10aaf0ea7\", // Get yours for free at https://rapidapi.com/judge0-official/api/judge0-ce/\r\n          \"content-type\": \"application/json\",\r\n          accept: \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          source_code: input,\r\n          stdin: null,\r\n          language_id: langId,\r\n        }),\r\n      }\r\n    );\r\n    setOutput(\"Submission Created ...\\n\");\r\n    const jsonResponse = await response.json();\r\n    if (!response.ok) {\r\n                const message = `An error has occured: ${response.status}`;\r\n                throw new Error(message);\r\n              }\r\n\r\n    let jsonGetSolution = {\r\n      status: { description: \"Queue\" },\r\n      stderr: null,\r\n      compile_output: null,\r\n    };\r\n\r\n    while (\r\n      jsonGetSolution.status.description !== \"Accepted\" &&\r\n      jsonGetSolution.stderr == null &&\r\n      jsonGetSolution.compile_output == null\r\n    ) {\r\n      setOutput(`Creating Submission ... \\nSubmission Created ...\\nChecking Submission Status\\nstatus : ${jsonGetSolution.status.description}`);\r\n      if (jsonResponse.token) {\r\n        let url = `https://judge0-ce.p.rapidapi.com/submissions/${jsonResponse.token}?base64_encoded=true`;\r\n\r\n        const getSolution = await fetch(url, {\r\n          method: \"GET\",\r\n          headers: {\r\n            \"x-rapidapi-host\": \"judge0-ce.p.rapidapi.com\",\r\n            \"x-rapidapi-key\": \"a1504d0aebmsha2c15d90ecffa8dp117081jsn36e10aaf0ea7\", // Get yours for free at https://rapidapi.com/judge0-official/api/judge0-ce/\r\n            \"content-type\": \"application/json\",\r\n          },\r\n        });\r\n\r\n        jsonGetSolution = await getSolution.json();\r\n      }\r\n    }\r\n    if (jsonGetSolution.stdout) {\r\n      const output = atob(jsonGetSolution.stdout);\r\n\r\n      setOutput('');\r\n      setOutput(`Results :\\n${output}\\nExecution Time : ${jsonGetSolution.time} Secs\\nMemory used : ${jsonGetSolution.memory} bytes`);\r\n    } else if (jsonGetSolution.stderr) {\r\n      const error = atob(jsonGetSolution.stderr);\r\n\r\n      setOutput(`\\n Error :${error}`);\r\n    } else {\r\n      const compilation_error = atob(jsonGetSolution.compile_output);\r\n\r\n      setOutput(`\\n Error :${compilation_error}`);\r\n    }\r\n}\r\n\r\nconst run = (e) => {\r\n  setShowOutput(true);\r\n  /* window.addEventListener('unhandledrejection', event => { console.log('E: ',event); });\r\n  onunhandledrejection = event => {\r\n    alert('There was an error submitting your code. Pls check your syntax & try again.')\r\n    console.log('invoke API '); //window.location.reload();\r\n  }; */\r\n\r\n  invokeAPI();\r\n}\r\n\r\nconst submit = (e) => {\r\n  const rawResponse = fetch(CONSTANTS.ENDPOINT.DIRECTUSAUTH, {\r\n          method: 'POST',\r\n          headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify({\r\n         \"email\": \"stint.assess@gmail.com\",\r\n         \"password\": \"dstintapp1\"\r\n       })}).then((res)=>{\r\n         var res = res.json();\r\n         res.then(function(r) {\r\n           console.log('Data: ', r.data);\r\n           console.log('AccessToken: ', r.data.access_token);\r\n               var accessToken = r.data.access_token;\r\n               createSessionRecording(accessToken);\r\n         });\r\n       });\r\n}\r\n\r\nconst createSessionRecording = (accessToken) => {\r\n       let recording = JSON.stringify(JSON.parse(localStorage.getItem('recording')).events);\r\n       recording = recording.replaceAll(\"\\\"\", \"'\");\r\n       const rawResponse = fetch(CONSTANTS.ENDPOINT.POSTSESSIONRECORDING, {\r\n           method: 'POST',\r\n           headers: {\r\n             'Accept': 'application/json',\r\n             'Content-Type': 'application/json'\r\n           },\r\n           body: JSON.stringify({\r\n          \"question_id\": questionId,\r\n          \"assessment_session_id\": parseInt(sessionStorage.getItem('assessment_session_id'),10),\r\n          \"events\":recording\r\n        })}).then((res)=>{\r\n          var res = res.json();\r\n          res.then(function(r) {\r\n            alert('submitted');\r\n            console.log('Data: ', r.data);\r\n          });\r\n       });\r\n    }\r\n\r\nconst getTimeLimitInMilliSecs = (timeStr) => {\r\n  timeStr = timeStr.replace(' min','');\r\n  var timeInMins = parseInt(timeStr, 10);\r\n  var timeInMilliSecs = timeInMins * 60 * 1000;\r\n  return timeInMilliSecs;\r\n}\r\n\r\nconst startQuestionTimer = (timeLimit) => {\r\n  var timeLimitInMilliSecs = getTimeLimitInMilliSecs(timeLimit);\r\n  var timeLimitInSecs = timeLimitInMilliSecs/1000;\r\n  setTimeRemaining(timeLimitInSecs);\r\n  console.log('timeInMilliSecs: ', timeLimitInMilliSecs);\r\n  setTimeout(function() {\r\n    console.log('load next question');\r\n  }, timeLimitInMilliSecs);\r\n}\r\n\r\nconst getQuestion = (accessToken, skillId, competencyId) => {\r\n       console.log('calling getQuestion...');\r\n       const rawResponse = fetch(CONSTANTS.ENDPOINT.GETQUESTION + accessToken + '&filter={ \"difficulty_level\": { \"_eq\": \"'+difficultyLevel+'\" }, \"skill_id\": { \"_eq\": '+skillId+' }, \"competency\": { \"_eq\": '+competencyId+' }}').then((res)=>{\r\n        var res = res.json();\r\n          res.then(function(r) {\r\n            var question = r.data;\r\n            var title = question[0].title;\r\n            var description = question[0].description;\r\n            var codeSnippet = question[0].code_snippet;\r\n            var timeLimit = question[0].time_limit;\r\n            setQuestionId(question[0].id);\r\n            console.log('codeSnippet: ', codeSnippet);\r\n            console.log('timeLimit', timeLimit);\r\n            startQuestionTimer(timeLimit);\r\n            setInput(codeSnippet);\r\n            setQuestionTitle(title);\r\n            setQuestionDescription(description);\r\n          });\r\n        });\r\n    }\r\n\r\nconst getQuestionToken = () => {\r\n  const rawResponse = fetch(CONSTANTS.ENDPOINT.DIRECTUSAUTH, {\r\n           method: 'POST',\r\n           headers: {\r\n             'Accept': 'application/json',\r\n             'Content-Type': 'application/json'\r\n           },\r\n           body: JSON.stringify({\r\n          \"email\": \"stint.assess@gmail.com\",\r\n          \"password\": \"dstintapp1\"\r\n        })}).then((res)=>{\r\n          var res = res.json();\r\n          res.then(function(r) {\r\n            console.log('Data: ', r.data);\r\n            console.log('AccessToken1: ', r.data.access_token);\r\n                var accessToken = r.data.access_token;\r\n                var difficultyLevel = \"Beginner\"; //read from session storage\r\n                var skillId = sessionStorage.getItem(\"primarySkill\"); //read from session storage\r\n                var competencyId = sessionStorage.getItem(\"competencyId\"); //read from session storage\r\n                getQuestion(accessToken, skillId, competencyId);\r\n\r\n          });\r\n        });\r\n}\r\nvar events = [];\r\nconst startSessionRecord = () => {\r\n\r\n  if(typeof window.rrweb != \"undefined\") {\r\n    window.rrweb.record({\r\n        emit(event) {\r\n          // push event into the events array\r\n          events.push(event);\r\n        },\r\n      });\r\n      function save() {\r\n        const body = JSON.stringify({ events });\r\n        localStorage.setItem('recording', body);\r\n        console.log('--events--', body);\r\n        /* new window.rrwebPlayer({\r\n          target: document.getElementById('container'), // customizable root element\r\n          props: {\r\n            events\r\n          },\r\n        }); */\r\n      }\r\n      setInterval(save, 15 * 1000);\r\n  }\r\n}\r\n\r\nuseEffect(() => {\r\n//window.showVideo = true;\r\n\r\nsetLang(sessionStorage.getItem('editorLangName'));\r\nsetLangId(LANG_ID_JAVA);\r\nlocalStorage.setItem('language_Id',LANG_ID_JAVA)\r\nif (localStorage.getItem('input') != null) {\r\nconsole.log('localStorage.getItem(input): ', localStorage.getItem('input'));\r\n  setDefaultCode(localStorage.getItem('input'));\r\n  setInput(localStorage.getItem('input'));\r\n}\r\n\r\n\r\ngetQuestionToken();\r\n\r\nstartSessionRecord()\r\n\r\n\r\n//setOutput(\"Click the 'Save & Run' button to view your program's output.\");\r\n    if (monaco) {\r\n      console.log(\"here is the monaco instance:\", monaco);\r\n    }\r\n  }, [monaco]);\r\n\r\nreturn (\r\n  <React.Fragment>\r\n\r\n    <div>\r\n      <div>\r\n        <section class=\"section\" style={{paddingTop: '24px', marginTop: '-6rem'}}>\r\n          <div class=\"container\">\r\n            <div style={{float: 'right'}}>\r\n              <span><b>Time left</b>&nbsp;&nbsp;</span><Timer seconds={timeRemaining} />\r\n            </div>\r\n            <div>\r\n              <div style={{lineHeight: '28px'}}><b>Live coding question:</b>&nbsp;&nbsp;{questionTitle}&nbsp;&nbsp;{questionDescription}<br/><span></span><br/><span style={{color: '#05976e'}}>*Use {lang} to write your code.</span>\r\n                <span style={{color:'#666',fontSize:'0.8rem'}}>(Please allow <b>camera access</b>. Your video is kept private.)</span>\r\n              </div>\r\n              <br/>\r\n              <div id=\"container\" class=\"engine_editor-container__2uqGs\" style={{width: '100%',height: '350px'}}>\r\n                <Editor\r\n                      defaultLanguage={lang}\r\n                      defaultValue={defaultCode}\r\n                      onChange={handleEditorChange}\r\n                    />\r\n              </div>\r\n              {showOutput && <div id=\"outputContainer\" class=\"engine_editor-container__2uqGs\" style={{width: '100%',height: '129px'}}>\r\n                <textarea disabled value=\"output\" width=\"300px\" height=\"400px\" className=\"engine_engine_output__dBs6o__2T5H9\" value={output}/>\r\n              </div>}\r\n\r\n\r\n\r\n              <div class=\"buttons mb-20\" style={{fontSize: '2rem',display: 'block',margin: '0 auto',left: '0',right: '0',textAlign: 'center', zIndex: '9'}}>\r\n                <div className=\"buttons mb-20\" style={{marginTop: '36px'}}>\r\n                  <span className=\"button is-primary mr-4\" onClick={()=>{run()}}>Save & Run</span>\r\n                  <span className=\"button is-primary mr-4 engine_right-btn-span__3aObT\" onClick={()=>{submit()}}>Submit & Load Next &gt;</span>\r\n                </div>\r\n              </div>\r\n\r\n\r\n            </div>\r\n\r\n\r\n          </div>\r\n        </section>\r\n      </div>\r\n      <div class=\"navbar-side is-hidden is-fixed is-top-0 is-left-0 has-background-blur\" style={{zIndex: '50', width:'100%', height: '100%'}}>\r\n        <div class=\"is-absolute\" style={{zIndex: '-1;'}}></div>\r\n        <div class=\"container is-relative\">\r\n          <a class=\"navbar-close is-absolute is-right-0 mt-6 mr-6\" href=\"#\">\r\n            <img src=\"acros-assets/icons/mobile-decline.svg\" alt=\"\"/>\r\n          </a>\r\n        </div>\r\n        <aside class=\"py-6 px-6 pb-8 has-background-white is-flex is-flex-direction-column is-justify-content-space-between\" style={{height: '100%',width: '288px', overflowY: 'auto'}}>\r\n          <div>\r\n            <a class=\"navbar-item title is-size-4 has-text-dark pl-4 mb-5\" href=\"#\">\r\n              <img src=\"acros-assets/logo/logo.png\" width=\"auto\" style={{maxHeight: 'initial', width:'70px'}} alt=\"\"/>\r\n            </a>\r\n          </div>\r\n          <div>\r\n            <div class=\"buttons mb-8\"><a class=\"button is-dark is-outlined is-fullwidth mb-4\" href=\"#\">Log In</a><a class=\"button is-primary is-fullwidth\" href=\"#\">Sign up</a></div>\r\n            <small class=\"has-text-grey-darker ml-6\">2021 © Shuffle</small>\r\n          </div>\r\n        </aside>\r\n      </div>\r\n    </div>\r\n\r\n    <section class=\"section py-16\" id=\"cvLive\" style={{paddingTop: '0px !important'}}>\r\n      <div class=\"container\">\r\n        <div class=\"columns is-align-items-center mb-0\">\r\n          <div class=\"column mb-16 mb-0-tablet\" style={{marginTop: '76px'}}>\r\n            <h2 class=\"title mb-6 has-mw-lg\" style={{fontSize: '2.2rem'}}></h2>\r\n            <p class=\"subtitle has-mw-md mb-12\"><br/><br/><br/><br/><br/></p>\r\n\r\n          </div>\r\n          <div class=\"column\">\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n\r\n\r\n\r\n\r\n  </React.Fragment>\r\n);\r\n}\r\nexport default AssessmentEngine;\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}