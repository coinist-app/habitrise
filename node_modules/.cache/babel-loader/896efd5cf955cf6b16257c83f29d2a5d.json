{"ast":null,"code":"import _defineProperty from\"/Users/sampath/Documents/code/me/stint-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/sampath/Documents/code/me/stint-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sampath/Documents/code/me/stint-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/sampath/Documents/code/me/stint-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectDestructuringEmpty from\"/Users/sampath/Documents/code/me/stint-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty\";import React from\"react\";import{useState,useEffect}from\"react\";import Editor,{useMonaco}from\"@monaco-editor/react\";import CONSTANTS from\"../../../constants\";import\"./engine.module.css\";var AssessmentEngine=function AssessmentEngine(_ref){_objectDestructuringEmpty(_ref);var LANG_ID_JAVA=62;var monaco=useMonaco();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),input=_useState2[0],setInput=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),lang=_useState4[0],setLang=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),questionTitle=_useState6[0],setQuestionTitle=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),questionDescription=_useState8[0],setQuestionDescription=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),langId=_useState10[0],setLangId=_useState10[1];var _useState11=useState({}),_useState12=_slicedToArray(_useState11,2),userInput=_useState12[0],setUserInput=_useState12[1];var _useState13=useState(\"Running...\"),_useState14=_slicedToArray(_useState13,2),output=_useState14[0],setOutput=_useState14[1];var _useState15=useState('public class Main {\\n\\t public static void main(String[] args) {} \\n}'),_useState16=_slicedToArray(_useState15,2),defaultCode=_useState16[0],setDefaultCode=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),showOutput=_useState18[0],setShowOutput=_useState18[1];var handleEditorChange=function handleEditorChange(value,event){setInput(value);localStorage.setItem('input',value);setShowOutput(false);};var invokeAPI=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,jsonResponse,message,jsonGetSolution,url,getSolution,_output,error,compilation_error;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setOutput('Creating Submission ...');_context.next=3;return fetch(\"https://judge0-ce.p.rapidapi.com/submissions\",{method:\"POST\",headers:{\"x-rapidapi-host\":\"judge0-ce.p.rapidapi.com\",\"x-rapidapi-key\":\"a1504d0aebmsha2c15d90ecffa8dp117081jsn36e10aaf0ea7\",// Get yours for free at https://rapidapi.com/judge0-official/api/judge0-ce/\n\"content-type\":\"application/json\",accept:\"application/json\"},body:JSON.stringify({source_code:input,stdin:null,language_id:langId})});case 3:response=_context.sent;setOutput(\"Submission Created ...\\n\");_context.next=7;return response.json();case 7:jsonResponse=_context.sent;if(response.ok){_context.next=11;break;}message=\"An error has occured: \".concat(response.status);throw new Error(message);case 11:jsonGetSolution={status:{description:\"Queue\"},stderr:null,compile_output:null};case 12:if(!(jsonGetSolution.status.description!==\"Accepted\"&&jsonGetSolution.stderr==null&&jsonGetSolution.compile_output==null)){_context.next=24;break;}setOutput(\"Creating Submission ... \\nSubmission Created ...\\nChecking Submission Status\\nstatus : \".concat(jsonGetSolution.status.description));if(!jsonResponse.token){_context.next=22;break;}url=\"https://judge0-ce.p.rapidapi.com/submissions/\".concat(jsonResponse.token,\"?base64_encoded=true\");_context.next=18;return fetch(url,{method:\"GET\",headers:{\"x-rapidapi-host\":\"judge0-ce.p.rapidapi.com\",\"x-rapidapi-key\":\"a1504d0aebmsha2c15d90ecffa8dp117081jsn36e10aaf0ea7\",// Get yours for free at https://rapidapi.com/judge0-official/api/judge0-ce/\n\"content-type\":\"application/json\"}});case 18:getSolution=_context.sent;_context.next=21;return getSolution.json();case 21:jsonGetSolution=_context.sent;case 22:_context.next=12;break;case 24:if(jsonGetSolution.stdout){_output=atob(jsonGetSolution.stdout);setOutput('');setOutput(\"Results :\\n\".concat(_output,\"\\nExecution Time : \").concat(jsonGetSolution.time,\" Secs\\nMemory used : \").concat(jsonGetSolution.memory,\" bytes\"));}else if(jsonGetSolution.stderr){error=atob(jsonGetSolution.stderr);setOutput(\"\\n Error :\".concat(error));}else{compilation_error=atob(jsonGetSolution.compile_output);setOutput(\"\\n Error :\".concat(compilation_error));}case 25:case\"end\":return _context.stop();}}},_callee);}));return function invokeAPI(){return _ref2.apply(this,arguments);};}();var run=function run(e){setShowOutput(true);/* window.addEventListener('unhandledrejection', event => { console.log('E: ',event); });\r\n  onunhandledrejection = event => {\r\n    alert('There was an error submitting your code. Pls check your syntax & try again.')\r\n    console.log('invoke API '); //window.location.reload();\r\n  }; */invokeAPI();};var getQuestion=function getQuestion(accessToken,difficultyLevel,skillId,competencyId){console.log('calling getQuestion...');var rawResponse=fetch(CONSTANTS.ENDPOINT.GETQUESTION+accessToken+'&filter={ \"difficulty_level\": { \"_eq\": \"'+difficultyLevel+'\" }, \"skill_id\": { \"_eq\": '+skillId+' }, \"competency\": { \"_eq\": '+competencyId+' }}').then(function(res){var res=res.json();res.then(function(r){var question=r.data;var title=question[0].title;var description=question[0].description;var codeSnippet=question[0].code_snippet;var timeLimit=question[0].time_limit;setDefaultCode(codeSnippet);console.log('setting');setInput(codeSnippet);setQuestionTitle(title);setQuestionDescription(description);});});};var getQuestionToken=function getQuestionToken(){var rawResponse=fetch(CONSTANTS.ENDPOINT.DIRECTUSAUTH,{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({\"email\":\"stint.assess@gmail.com\",\"password\":\"dstintapp1\"})}).then(function(res){var res=res.json();res.then(function(r){console.log('Data: ',r.data);console.log('AccessToken1: ',r.data.access_token);var accessToken=r.data.access_token;var difficultyLevel=\"Beginner\";//read from session storage\nvar skillId=1;//read from session storage\nvar competencyId=\"1\";//read from session storage\ngetQuestion(accessToken,difficultyLevel,skillId,competencyId);});});};useEffect(function(){window.showVideo=true;setLang(\"java\");setLangId(LANG_ID_JAVA);localStorage.setItem('language_Id',LANG_ID_JAVA);if(localStorage.getItem('input')!=null){console.log('localStorage.getItem(input): ',localStorage.getItem('input'));setDefaultCode(localStorage.getItem('input'));setInput(localStorage.getItem('input'));}getQuestionToken();//setOutput(\"Click the 'Save & Run' button to view your program's output.\");\nif(monaco){console.log(\"here is the monaco instance:\",monaco);}},[monaco]);return React.createElement(React.Fragment,null,React.createElement(\"div\",null,React.createElement(\"div\",null,React.createElement(\"section\",{class:\"section\",style:{paddingTop:'24px',marginTop:'-6rem'}},React.createElement(\"div\",{class:\"container\"},React.createElement(\"div\",null,React.createElement(\"div\",null,React.createElement(\"b\",null,\"Live coding question:\"),\"\\xA0\\xA0\",questionTitle,\"\\xA0\\xA0\",questionDescription,React.createElement(\"br\",null),React.createElement(\"span\",null),React.createElement(\"br\",null),React.createElement(\"span\",{style:{color:'#05976e'}},\"*Use \",lang,\" to write your code.\"),React.createElement(\"span\",{style:{color:'#666',fontSize:'0.8rem'}},\"(Please allow \",React.createElement(\"b\",null,\"camera access\"),\". Your video is kept private.)\")),React.createElement(\"br\",null),React.createElement(\"div\",{id:\"container\",class:\"engine_editor-container__2uqGs\",style:{width:'100%',height:'350px'}},React.createElement(Editor,{defaultLanguage:lang,defaultValue:defaultCode,onChange:handleEditorChange})),showOutput&&React.createElement(\"div\",{id:\"outputContainer\",class:\"engine_editor-container__2uqGs\",style:{width:'100%',height:'129px'}},React.createElement(\"textarea\",_defineProperty({disabled:true,value:\"output\",width:\"300px\",height:\"400px\",className:\"engine_engine_output__dBs6o__2T5H9\"},\"value\",output))),React.createElement(\"div\",{class:\"buttons mb-20\",style:{fontSize:'2rem',display:'block',margin:'0 auto',left:'0',right:'0',textAlign:'center'}},React.createElement(\"div\",{className:\"buttons mb-20\",style:{marginTop:'36px'}},React.createElement(\"span\",{className:\"button is-primary mr-4\",onClick:function onClick(){run();}},\"Save & Run\"))))))),React.createElement(\"div\",{class:\"navbar-side is-hidden is-fixed is-top-0 is-left-0 has-background-blur\",style:{zIndex:'50',width:'100%',height:'100%'}},React.createElement(\"div\",{class:\"is-absolute\",style:{zIndex:'-1;'}}),React.createElement(\"div\",{class:\"container is-relative\"},React.createElement(\"a\",{class:\"navbar-close is-absolute is-right-0 mt-6 mr-6\",href:\"#\"},React.createElement(\"img\",{src:\"acros-assets/icons/mobile-decline.svg\",alt:\"\"}))),React.createElement(\"aside\",{class:\"py-6 px-6 pb-8 has-background-white is-flex is-flex-direction-column is-justify-content-space-between\",style:{height:'100%',width:'288px',overflowY:'auto'}},React.createElement(\"div\",null,React.createElement(\"a\",{class:\"navbar-item title is-size-4 has-text-dark pl-4 mb-5\",href:\"#\"},React.createElement(\"img\",{src:\"acros-assets/logo/logo.png\",width:\"auto\",style:{maxHeight:'initial',width:'70px'},alt:\"\"}))),React.createElement(\"div\",null,React.createElement(\"div\",{class:\"buttons mb-8\"},React.createElement(\"a\",{class:\"button is-dark is-outlined is-fullwidth mb-4\",href:\"#\"},\"Log In\"),React.createElement(\"a\",{class:\"button is-primary is-fullwidth\",href:\"#\"},\"Sign up\")),React.createElement(\"small\",{class:\"has-text-grey-darker ml-6\"},\"2021 \\xA9 Shuffle\"))))),React.createElement(\"section\",{class:\"section py-16\",id:\"cvLive\",style:{paddingTop:'0px !important'}},React.createElement(\"div\",{class:\"container\"},React.createElement(\"div\",{class:\"columns is-align-items-center mb-0\"},React.createElement(\"div\",{class:\"column mb-16 mb-0-tablet\",style:{marginTop:'76px'}},React.createElement(\"h2\",{class:\"title mb-6 has-mw-lg\",style:{fontSize:'2.2rem'}}),React.createElement(\"p\",{class:\"subtitle has-mw-md mb-12\"},React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null))),React.createElement(\"div\",{class:\"column\"})))));};export default AssessmentEngine;","map":{"version":3,"sources":["/Users/sampath/Documents/code/me/stint-web/src/components/assessment/engine/index.jsx"],"names":["React","useState","useEffect","Editor","useMonaco","CONSTANTS","AssessmentEngine","LANG_ID_JAVA","monaco","input","setInput","lang","setLang","questionTitle","setQuestionTitle","questionDescription","setQuestionDescription","langId","setLangId","userInput","setUserInput","output","setOutput","defaultCode","setDefaultCode","showOutput","setShowOutput","handleEditorChange","value","event","localStorage","setItem","invokeAPI","fetch","method","headers","accept","body","JSON","stringify","source_code","stdin","language_id","response","json","jsonResponse","ok","message","status","Error","jsonGetSolution","description","stderr","compile_output","token","url","getSolution","stdout","atob","time","memory","error","compilation_error","run","e","getQuestion","accessToken","difficultyLevel","skillId","competencyId","console","log","rawResponse","ENDPOINT","GETQUESTION","then","res","r","question","data","title","codeSnippet","code_snippet","timeLimit","time_limit","getQuestionToken","DIRECTUSAUTH","access_token","window","showVideo","getItem","paddingTop","marginTop","color","fontSize","width","height","display","margin","left","right","textAlign","zIndex","overflowY","maxHeight"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport {useState, useEffect} from \"react\";\r\nimport Editor, { useMonaco } from \"@monaco-editor/react\";\r\nimport CONSTANTS from \"../../../constants\";\r\nimport \"./engine.module.css\";\r\n\r\nconst AssessmentEngine = ({}) => {\r\n\r\nconst LANG_ID_JAVA = 62;\r\n\r\nconst monaco = useMonaco();\r\nconst [input, setInput] = useState({});\r\nconst [lang, setLang] = useState(\"\");\r\nconst [questionTitle, setQuestionTitle] = useState(\"\");\r\nconst [questionDescription, setQuestionDescription] = useState(\"\");\r\nconst [langId, setLangId] = useState(0);\r\nconst [userInput, setUserInput] = useState({});\r\nconst [output, setOutput] = useState(\"Running...\");\r\nconst [defaultCode, setDefaultCode] = useState('public class Main {\\n\\t public static void main(String[] args) {} \\n}');\r\nconst [showOutput, setShowOutput] = useState(false);\r\n\r\nconst handleEditorChange = (value, event) => {\r\n    setInput(value);\r\n    localStorage.setItem('input', value);\r\n    setShowOutput(false);\r\n};\r\n\r\nconst invokeAPI = async () => {\r\n    setOutput('Creating Submission ...');\r\n    const response = await fetch(\r\n      \"https://judge0-ce.p.rapidapi.com/submissions\",\r\n      {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"x-rapidapi-host\": \"judge0-ce.p.rapidapi.com\",\r\n          \"x-rapidapi-key\": \"a1504d0aebmsha2c15d90ecffa8dp117081jsn36e10aaf0ea7\", // Get yours for free at https://rapidapi.com/judge0-official/api/judge0-ce/\r\n          \"content-type\": \"application/json\",\r\n          accept: \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          source_code: input,\r\n          stdin: null,\r\n          language_id: langId,\r\n        }),\r\n      }\r\n    );\r\n    setOutput(\"Submission Created ...\\n\");\r\n    const jsonResponse = await response.json();\r\n    if (!response.ok) {\r\n                const message = `An error has occured: ${response.status}`;\r\n                throw new Error(message);\r\n              }\r\n\r\n    let jsonGetSolution = {\r\n      status: { description: \"Queue\" },\r\n      stderr: null,\r\n      compile_output: null,\r\n    };\r\n\r\n    while (\r\n      jsonGetSolution.status.description !== \"Accepted\" &&\r\n      jsonGetSolution.stderr == null &&\r\n      jsonGetSolution.compile_output == null\r\n    ) {\r\n      setOutput(`Creating Submission ... \\nSubmission Created ...\\nChecking Submission Status\\nstatus : ${jsonGetSolution.status.description}`);\r\n      if (jsonResponse.token) {\r\n        let url = `https://judge0-ce.p.rapidapi.com/submissions/${jsonResponse.token}?base64_encoded=true`;\r\n\r\n        const getSolution = await fetch(url, {\r\n          method: \"GET\",\r\n          headers: {\r\n            \"x-rapidapi-host\": \"judge0-ce.p.rapidapi.com\",\r\n            \"x-rapidapi-key\": \"a1504d0aebmsha2c15d90ecffa8dp117081jsn36e10aaf0ea7\", // Get yours for free at https://rapidapi.com/judge0-official/api/judge0-ce/\r\n            \"content-type\": \"application/json\",\r\n          },\r\n        });\r\n\r\n        jsonGetSolution = await getSolution.json();\r\n      }\r\n    }\r\n    if (jsonGetSolution.stdout) {\r\n      const output = atob(jsonGetSolution.stdout);\r\n\r\n      setOutput('');\r\n      setOutput(`Results :\\n${output}\\nExecution Time : ${jsonGetSolution.time} Secs\\nMemory used : ${jsonGetSolution.memory} bytes`);\r\n    } else if (jsonGetSolution.stderr) {\r\n      const error = atob(jsonGetSolution.stderr);\r\n\r\n      setOutput(`\\n Error :${error}`);\r\n    } else {\r\n      const compilation_error = atob(jsonGetSolution.compile_output);\r\n\r\n      setOutput(`\\n Error :${compilation_error}`);\r\n    }\r\n}\r\n\r\nconst run = (e) => {\r\n  setShowOutput(true);\r\n  /* window.addEventListener('unhandledrejection', event => { console.log('E: ',event); });\r\n  onunhandledrejection = event => {\r\n    alert('There was an error submitting your code. Pls check your syntax & try again.')\r\n    console.log('invoke API '); //window.location.reload();\r\n  }; */\r\n\r\n  invokeAPI();\r\n}\r\n\r\nconst getQuestion = (accessToken, difficultyLevel, skillId, competencyId) => {\r\n       console.log('calling getQuestion...');\r\n       const rawResponse = fetch(CONSTANTS.ENDPOINT.GETQUESTION + accessToken + '&filter={ \"difficulty_level\": { \"_eq\": \"'+difficultyLevel+'\" }, \"skill_id\": { \"_eq\": '+skillId+' }, \"competency\": { \"_eq\": '+competencyId+' }}').then((res)=>{\r\n        var res = res.json();\r\n          res.then(function(r) {\r\n            var question = r.data;\r\n            var title = question[0].title;\r\n            var description = question[0].description;\r\n            var codeSnippet = question[0].code_snippet;\r\n            var timeLimit = question[0].time_limit;\r\n            setDefaultCode(codeSnippet);\r\n            console.log('setting');\r\n            setInput(codeSnippet);\r\n            setQuestionTitle(title);\r\n            setQuestionDescription(description);\r\n          });\r\n        });\r\n    }\r\n\r\nconst getQuestionToken = () => {\r\n  const rawResponse = fetch(CONSTANTS.ENDPOINT.DIRECTUSAUTH, {\r\n           method: 'POST',\r\n           headers: {\r\n             'Accept': 'application/json',\r\n             'Content-Type': 'application/json'\r\n           },\r\n           body: JSON.stringify({\r\n          \"email\": \"stint.assess@gmail.com\",\r\n          \"password\": \"dstintapp1\"\r\n        })}).then((res)=>{\r\n          var res = res.json();\r\n          res.then(function(r) {\r\n            console.log('Data: ', r.data);\r\n            console.log('AccessToken1: ', r.data.access_token);\r\n                var accessToken = r.data.access_token;\r\n                var difficultyLevel = \"Beginner\"; //read from session storage\r\n                var skillId = 1; //read from session storage\r\n                var competencyId = \"1\"; //read from session storage\r\n                getQuestion(accessToken, difficultyLevel, skillId, competencyId);\r\n\r\n          });\r\n        });\r\n}\r\n\r\nuseEffect(() => {\r\nwindow.showVideo = true;\r\n\r\nsetLang(\"java\");\r\nsetLangId(LANG_ID_JAVA);\r\nlocalStorage.setItem('language_Id',LANG_ID_JAVA)\r\nif (localStorage.getItem('input') != null) {\r\nconsole.log('localStorage.getItem(input): ', localStorage.getItem('input'));\r\n  setDefaultCode(localStorage.getItem('input'));\r\n  setInput(localStorage.getItem('input'));\r\n}\r\n\r\n\r\ngetQuestionToken();\r\n\r\n\r\n//setOutput(\"Click the 'Save & Run' button to view your program's output.\");\r\n    if (monaco) {\r\n      console.log(\"here is the monaco instance:\", monaco);\r\n    }\r\n  }, [monaco]);\r\n\r\nreturn (\r\n  <React.Fragment>\r\n\r\n    <div>\r\n      <div>\r\n        <section class=\"section\" style={{paddingTop: '24px', marginTop: '-6rem'}}>\r\n          <div class=\"container\">\r\n\r\n            <div>\r\n              <div><b>Live coding question:</b>&nbsp;&nbsp;{questionTitle}&nbsp;&nbsp;{questionDescription}<br/><span></span><br/><span style={{color: '#05976e'}}>*Use {lang} to write your code.</span>\r\n                <span style={{color:'#666',fontSize:'0.8rem'}}>(Please allow <b>camera access</b>. Your video is kept private.)</span>\r\n              </div>\r\n              <br/>\r\n              <div id=\"container\" class=\"engine_editor-container__2uqGs\" style={{width: '100%',height: '350px'}}>\r\n                <Editor\r\n                      defaultLanguage={lang}\r\n                      defaultValue={defaultCode}\r\n                      onChange={handleEditorChange}\r\n                    />\r\n              </div>\r\n              {showOutput && <div id=\"outputContainer\" class=\"engine_editor-container__2uqGs\" style={{width: '100%',height: '129px'}}>\r\n                <textarea disabled value=\"output\" width=\"300px\" height=\"400px\" className=\"engine_engine_output__dBs6o__2T5H9\" value={output}/>\r\n              </div>}\r\n\r\n\r\n\r\n              <div class=\"buttons mb-20\" style={{fontSize: '2rem',display: 'block',margin: '0 auto',left: '0',right: '0',textAlign: 'center'}}>\r\n                <div className=\"buttons mb-20\" style={{marginTop: '36px'}}><span className=\"button is-primary mr-4\" onClick={()=>{run()}}>Save & Run</span></div>\r\n              </div>\r\n\r\n            </div>\r\n\r\n\r\n          </div>\r\n        </section>\r\n      </div>\r\n      <div class=\"navbar-side is-hidden is-fixed is-top-0 is-left-0 has-background-blur\" style={{zIndex: '50', width:'100%', height: '100%'}}>\r\n        <div class=\"is-absolute\" style={{zIndex: '-1;'}}></div>\r\n        <div class=\"container is-relative\">\r\n          <a class=\"navbar-close is-absolute is-right-0 mt-6 mr-6\" href=\"#\">\r\n            <img src=\"acros-assets/icons/mobile-decline.svg\" alt=\"\"/>\r\n          </a>\r\n        </div>\r\n        <aside class=\"py-6 px-6 pb-8 has-background-white is-flex is-flex-direction-column is-justify-content-space-between\" style={{height: '100%',width: '288px', overflowY: 'auto'}}>\r\n          <div>\r\n            <a class=\"navbar-item title is-size-4 has-text-dark pl-4 mb-5\" href=\"#\">\r\n              <img src=\"acros-assets/logo/logo.png\" width=\"auto\" style={{maxHeight: 'initial', width:'70px'}} alt=\"\"/>\r\n            </a>\r\n          </div>\r\n          <div>\r\n            <div class=\"buttons mb-8\"><a class=\"button is-dark is-outlined is-fullwidth mb-4\" href=\"#\">Log In</a><a class=\"button is-primary is-fullwidth\" href=\"#\">Sign up</a></div>\r\n            <small class=\"has-text-grey-darker ml-6\">2021 Â© Shuffle</small>\r\n          </div>\r\n        </aside>\r\n      </div>\r\n    </div>\r\n\r\n    <section class=\"section py-16\" id=\"cvLive\" style={{paddingTop: '0px !important'}}>\r\n      <div class=\"container\">\r\n        <div class=\"columns is-align-items-center mb-0\">\r\n          <div class=\"column mb-16 mb-0-tablet\" style={{marginTop: '76px'}}>\r\n            <h2 class=\"title mb-6 has-mw-lg\" style={{fontSize: '2.2rem'}}></h2>\r\n            <p class=\"subtitle has-mw-md mb-12\"><br/><br/><br/><br/><br/></p>\r\n\r\n          </div>\r\n          <div class=\"column\">\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n\r\n\r\n\r\n\r\n  </React.Fragment>\r\n);\r\n}\r\nexport default AssessmentEngine;\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}